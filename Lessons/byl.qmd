---
title: "博弈论与机制设计"
---

::: titlepage
**博弈论与机制设计**

吕博涵整理

[lyubh.cn](lyubh.cn){.uri}

2025-07-11
:::

# 博弈论基础

## 什么是博弈？

一个博弈主要由三个要素构成 ：

1.  **参与人 (Players)**：博弈的决策主体。

2.  **规则
    (Rules)**：规定了参与人可以采取的行动、行动的顺序以及他们拥有的信息。

3.  **收益/支付
    (Payoffs)**：当所有参与人做出决策后，每个参与人得到的效用或回报。

## 正规形式博弈 (Normal Form Game)

正规形式博弈，也称为策略形式博弈，通常用于描述参与人同时做出决策（或者等同于同时做出）的博弈。

特点：非合作 (Non-cooperative)，即参与人不能进行有约束力的承诺或协议。

::: example
**例子 1** (囚徒困境 (Prisoner's Dilemma)).
*两名囚徒被分开审讯，他们可以选择合作（C: 告诉同伙/保持沉默）或背叛（D:
告诉警察）。效用表示为 (囚徒1的效用,
囚徒2的效用)。负数越大表示惩罚越重。*

*假设效用如下 (注释中的C,D含义与笔记相反，这里采用笔记中的C:坦白,
D:抵赖，但为了与经典囚徒困境含义一致，我们设C=抵赖，D=坦白)：*

笔记中的原始效用 (C:坦白, D:抵赖)： 

*$$\begin{array}{c|cc}
    \text{参与人1 / 参与人2} & \text{C (坦白)} & \text{D (抵赖)} \\
    \hline
    \text{C (坦白)} & -3,-3 & -1,-4 \\
    \text{D (抵赖)} & -4,-1 & 0,0 \\
\end{array}$$*

*在这个例子中，\"坦白\" 是每个参与人的占优策略。\"均选择坦白\" (-3,-3)
是纳什均衡。*

如果我们将 C 定义为"合作/沉默"，D
定义为"背叛/坦白"，一个更经典的支付矩阵可能是： 

*$$\begin{array}{c|cc}
    \text{参与人1 / 参与人2} & \text{C (合作/沉默)} & \text{D (背叛/坦白)} \\
    \hline
    \text{C (合作/沉默)} & -1,-1 & -10,0 \\
    \text{D (背叛/坦白)} & 0,-10 & -5,-5 \\
\end{array}$$*

*在这个经典版本中，(D,D) 即 (-5,-5) 是纳什均衡，尽管 (C,C) 即 (-1,-1)
对双方都更好。*

*笔记中的 (-3,-3) 对应经典版 (D,D)，(0,0) 对应经典版 (C,C)。*
:::

### 策略的优劣势

-   **严格占优策略 (Strictly Dominant Strategy)**：一个策略 $\hat{a}_i$
    对参与人 $i$
    来说是严格占优策略，如果无论其他参与人选择什么策略，选择 $\hat{a}_i$
    的收益总是严格大于选择任何其他策略 $a_i \neq \hat{a}_i$ 的收益。

    Formal: $\Pi^i(\hat{a}_i, a_{-i}) > \Pi^i(a_i, a_{-i})$ for all
    $a_i \neq \hat{a}_i$ and for all $a_{-i} \in A_{-i}$.

-   **弱占优策略 (Weakly Dominant Strategy)**：一个策略 $\hat{a}_i$
    对参与人 $i$ 来说是弱占优策略，如果无论其他参与人选择什么策略，选择
    $\hat{a}_i$ 的收益总是大于或等于选择任何其他策略
    $a_i \neq \hat{a}_i$
    的收益，并且至少在一种其他参与人的策略组合下，选择 $\hat{a}_i$
    的收益严格更高。

    Formal: $\Pi^i(\hat{a}_i, a_{-i}) \ge \Pi^i(a_i, a_{-i})$ for all
    $a_i \neq \hat{a}_i$ and for all $a_{-i} \in A_{-i}$, and
    $\exists a_{-i}' \in A_{-i}$ such that
    $\Pi^i(\hat{a}_i, a_{-i}') > \Pi^i(a_i, a_{-i}')$.

-   **严格劣策略 (Strictly Dominated Strategy)**：一个策略 $a_i'$
    是严格劣策略，如果存在另一个策略 $a_i$ 使得无论其他参与人选择什么，
    $a_i$ 的收益总是严格大于 $a_i'$ 的收益。

-   **弱劣策略 (Weakly Dominated Strategy)**：一个策略 $a_i'$
    是弱劣策略，如果存在另一个策略 $a_i$ 使得无论其他参与人选择什么，
    $a_i$ 的收益总是大于或等于 $a_i'$
    的收益，并且至少在一种其他参与人的策略组合下，$a_i$ 的收益严格更高。

**重要结论**：在寻找纳什均衡时，可以忽略严格劣策略。弱劣策略的剔除需要更谨慎。

### 纳什均衡 (Nash Equilibrium)

::: definition
**定义 2** (纳什均衡). *在一个 $n$ 人正规形式博弈中，策略组合
$(a_1^*, a_2^*, \dots, a_n^*)$ 是一个纳什均衡，如果对于每一个参与人
$i \in \{1, 2, \dots, n\}$，策略 $a_i^*$ 是在给定其他参与人选择
$a_{-i}^* = (a_1^*, \dots, a_{i-1}^*, a_{i+1}^*, \dots, a_n^*)$
的情况下的最优反应 (best
response)。也就是说，没有任何一个参与人有动机单方面改变自己的策略。*

*Formal: 对于任意 $i \in \{1, 2, \dots, n\}$，以及任意
$a_i \in A_i$，都有：$\Pi^i(a_i^*, a_{-i}^*) \ge \Pi^i(a_i, a_{-i}^*)$，此时称
$a_i^*$ 是对 $a_{-i}^*$ 的最优反应。*
:::

纳什均衡不一定是唯一的。

::: example
**例子 3** (协调博弈 (Coordination Game)). *$$\begin{array}{c|cc}
     & \text{A} & \text{B} \\
    \hline
    \text{A} & 2,2 & 0,0 \\
    \text{B} & 0,0 & 1,1 \\
\end{array}$$ 在这个博弈中，(A,A) 和 (B,B) 都是纯策略纳什均衡。*
:::

## 混合策略 (Mixed Strategies)

当纯策略纳什均衡不存在，或者参与人希望让对手难以预测自己的行为时，会使用混合策略。混合策略是参与人在其可用纯策略集合上选择的一个概率分布。

::: example
**例子 4** (剪刀石头布 (Rock-Paper-Scissors)). *效用矩阵如下 (赢+1,
输-1, 平0)： $$\begin{array}{c|ccc}
    \text{1 / 2} & \text{石头(R)} & \text{布(P)} & \text{剪刀(S)} \\
    \hline
    \text{石头(R)} & 0,0 & -1,1 & 1,-1 \\
    \text{布(P)} & 1,-1 & 0,0 & -1,1 \\
    \text{剪刀(S)} & -1,1 & 1,-1 & 0,0 \\
\end{array}$$ 这个博弈没有纯策略纳什均衡。
唯一的混合策略纳什均衡是双方都以 $(1/3, 1/3, 1/3)$
的概率随机选择石头、布、剪刀。此时，双方的期望支付都是0。*
:::

**混合策略的条件**：当一个参与人愿意混合使用某些纯策略时，这些纯策略在给定对手策略的情况下，必须能给该参与人带来相同的期望效用。否则，他会选择期望效用最高的那个纯策略。

::: example
**例子 5** (混合策略求解). *考虑以下博弈，参与人1选择A或B的概率为 $p$ 和
$1-p$；参与人2选择A或B的概率为 $q$ 和 $1-q$。 $$\begin{array}{c|cc}
    \text{1 / 2} & \text{A ($q$)} & \text{B ($1-q$)} \\
    \hline
    \text{A ($p$)} & 1,1 & 0,0 \\
    \text{B ($1-p$)} & 0,0 & 2,2 \\
\end{array}$$ 对于参与人1： 期望效用
$\Pi^1(A) = q \cdot 1 + (1-q) \cdot 0 = q$ 期望效用
$\Pi^1(B) = q \cdot 0 + (1-q) \cdot 2 = 2-2q$ 若要混合A和B，则
$\Pi^1(A) = \Pi^1(B) \implies q = 2-2q \implies 3q=2 \implies q=2/3$。
同理，对于参与人2可解得 $p=2/3$。 因此，一个混合策略纳什均衡是双方都以
$2/3$ 的概率选择A，以 $1/3$ 的概率选择B。 ((A,A), (B,B)
也是纯策略纳什均衡)。*

*笔记中 的另一个例子： $$\begin{array}{c|ccc}
    \text{1 / 2} & \text{D} & \text{E} & \text{F} \\
    \hline
    \text{A} & 1,1 & 0,0 & 0,0 \\
    \text{B} & 0,0 & 2,2 & 0,0 \\
    \text{C} & 0,0 & 0,0 & 3,3 \\
\end{array}$$ 纯策略纳什均衡有 (A,D), (B,E), (C,F)。
考虑参与人1混合A和B，参与人2混合D和E。假设参与人1选择A的概率为$p_A$，B为$p_B$
($p_C=0$)；参与人2选择D的概率为$q_D$，E为$q_E$ ($q_F=0$)。
$\Pi^1(A) = q_D \cdot 1 + q_E \cdot 0 = q_D$
$\Pi^1(B) = q_D \cdot 0 + q_E \cdot 2 = 2q_E$ 若混合A,B，则
$q_D = 2q_E$。因为 $q_D+q_E=1$，所以 $q_D=2/3, q_E=1/3$。
同理，对参与人2： $\Pi^2(D) = p_A \cdot 1 + p_B \cdot 0 = p_A$
$\Pi^2(E) = p_A \cdot 0 + p_B \cdot 2 = 2p_B$ 若混合D,E，则
$p_A = 2p_B$。因为 $p_A+p_B=1$，所以 $p_A=2/3, p_B=1/3$。
此时，参与人1选择A的期望效用为 $2/3$，选择B的期望效用也为
$2/3$。选择C的期望效用为0。由于 $2/3 \ge 0$，参与人1不会切换到C。
参与人2同理。 所以一个混合策略纳什均衡是
$a_1 = (2/3, 1/3, 0)$，$a_2 = (2/3, 1/3, 0)$。*
:::

## 扩展形式博弈 (Extensive Form Game / Game Tree)

扩展形式博弈用博弈树来表示，它明确了参与人的行动顺序、每个决策节点的信息以及最终的支付。

::: example
**例子 6** (抢劫者博弈). *参与人1 (受害者) 可以选择给钱 (-100) 或不给钱
(0)。 如果给钱，博弈结束，支付为 (-100, +100)。 如果不给钱，参与人2
(抢劫者) 可以选择走开 (Walk away) 或杀人 (Kill)。 若走开，支付为 (0,0)。
若杀人，支付为 $(-\infty, -1000)$
(这里的-1000对抢劫者来说也是极差的结果，表示被捕等)。 博弈树表示：*

-   *节点1 (参与人1决策):*

    -   *动作: 给\$100 $\rightarrow$ 支付: $(-100, +100)$*

    -   *动作: 给\$0 $\rightarrow$ 进入节点2 (参与人2决策)*

        -   *动作: 走开 $\rightarrow$ 支付: $(0,0)$*

        -   *动作: 杀人 $\rightarrow$ 支付: $(-\infty, -1000)$*
:::

### 子博弈 (Subgame)

::: definition
**定义 7** (子博弈).
*一个扩展形式博弈的子博弈是原博弈的一部分，它满足：*

1.  *它从一个单独的决策节点开始。*

2.  *它包含该节点之后的所有决策节点和终端节点。*

3.  *如果一个决策节点属于子博弈，那么该节点所在信息集中的所有其他节点也必须属于该子博弈
    (即不能打断信息集)。*
:::

**信息集 (Information
Set)**：如果一个参与人在某个决策节点做决策时，不知道自己确切处于该信息集中的哪一个具体节点，那么这些节点构成一个信息集。

### 子博弈完美纳什均衡 (Subgame Perfect Nash Equilibrium - SPE)

::: definition
**定义 8** (SPE).
*一个策略组合是子博弈完美纳什均衡，如果它在整个博弈中构成纳什均衡，并且在每一个子博弈中也都构成纳什均衡。*
:::

SPE通过**逆向归纳法 (Backward Induction)**
求解，从最后一个子博弈开始分析，逐步向前推导。SPE排除了包含"不可信威胁
(incredible threat)"的纳什均衡。

在抢劫者博弈中 ： 子博弈：从参与人2的决策节点开始。

-   在该子博弈中，参与人2比较"走开"(0) 和"杀人"(-1000)
    的效用。理性选择是"走开"。

现在回到参与人1的决策：

-   如果给\$100，效用为 -100。

-   如果不给\$0，预料到参与人2会"走开"，则效用为 0。

参与人1比较 -100 和 0，选择不给\$0。
因此，SPE是：参与人1选择"不给\$0"；参与人2的策略是"如果参与人1不给钱，则选择走开"。支付为
(0,0)。 笔记中提到的一个非SPE的纳什均衡是：$a_1$=给\$100, $a_2$=杀人
(如果参与人1不给钱)。这是纳什均衡，因为给定$a_2$，参与人1给钱是最佳选择；给定$a_1$，参与人2无论做什么都无所谓，因为其决策节点不会到达。但"杀人"是不可信威胁。

::: example
**例子 9** (蜈蚣博弈 (Centipede Game)). *两个参与人轮流选择"继续
(K)"或"停止
(S)"。每次"继续"都会使总金额增加，但将决策权交给对方；选择"停止"则拿走当前总金额的较大部分。
例如：*

-   *1开始: (S) $\rightarrow$ (1,1) ; (K) $\rightarrow$ 轮到2*

-   *2决策: (S) $\rightarrow$ (0,3) ; (K) $\rightarrow$ 轮到1*

-   *1决策: (S) $\rightarrow$ (2,2) ; (K) $\rightarrow$ 轮到2*

-   *2决策: (S) $\rightarrow$ (1,4) ; (K) $\rightarrow$ \...*

-   *\...*

-   *假设最后一步是100轮后，2决策: (S) $\rightarrow$ (99,99) ; (K)
    $\rightarrow$ (98,101)*

-   *101轮后，1决策: (S) $\rightarrow$ (100,100)*

*通过逆向归纳法，SPE是参与人1在第一个决策节点就选择"停止 (S)"，获得支付
(1,1)。*
:::

::: example
**例子 10** (鲁宾斯坦交替出价谈判模型 (Rubinstein Alternating Offer
Bargaining Game)).
*两个参与人轮流提议如何分割一块大小为1的"馅饼"。馅饼会随时间"融化"，即存在时间折扣因子
$\delta \in [0,1]$。*

-   *Period 1 (参与人1提议): 提议 $x_1$ 给自己，则 $1-x_1$
    给参与人2。参与人2选择接受或拒绝。*

    -   *接受: 支付 $(x_1, 1-x_1)$*

    -   *拒绝: 进入Period 2，总馅饼大小变为 $\delta$*

-   *Period 2 (参与人2提议): 提议 $x_2$ 给自己，则 $\delta-x_2$
    给参与人1。(注意这里 $x_2$ 是从当前总额 $\delta$ 中分的)
    更常见的表示是，参与人2提议自己分得 $y_2 \in [0,1]$
    的比例，则其收益为 $y_2 \delta$，参与人1收益为
    $(1-y_2)\delta$。我们采用笔记中的方式。 参与人2提议自己分得份额
    $s_2$，则参与人1得到 $\delta-s_2$。参与人1接受或拒绝。*

    -   *接受: 支付 $(\delta-s_2, s_2)$*

    -   *拒绝: 进入Period 3，总馅饼大小变为 $\delta^2$*

-   *Period 3 (参与人1提议): \...*

*笔记中的 $x_i$ 指的是当期提议者给自己留下的份额。 假设
$T$期结束，如果到 $T$ 期还未达成协议，则双方支付为0。*
:::

逆向归纳 (以3期为例，笔记中 $x_i$ 为提议者提议给自己的份额)：

-   Period 3 (参与人1提议): 参与人2会接受任何 $1-x_3 \ge 0$
    (因为拒绝则得到0)。所以参与人1会提议 $x_3=1$ (即自己拿走所有剩余的
    $\delta^2$)。参与人2得到0。此时对参与人1的价值是 $\delta^2$。

-   Period 2 (参与人2提议，总额为 $\delta$):
    参与人1会接受如果自己得到的份额
    $x_1' \ge \delta \cdot (\text{参与人1在第3期得到的份额的折现值})$。
    笔记中符号为：参与人2提议自己拿 $x_2$，给参与人1的份额是
    $\delta-x_2$ (注意这里不是比例，而是绝对值)。参与人1接受条件是
    $\delta-x_2 \ge \delta \cdot \delta^2 = \delta^3$
    (这是参与人1在第三期得到的$\delta^2$再折现到第二期)。不对，应该是参与人1在第3期提议时，他会得到整个当时的饼
    $\delta^2$。所以，参与人2在第2期提议时，要使得参与人1接受，必须给参与人1的份额至少等于参与人1在第3期能得到的份额的折现值，即
    $\delta \cdot (\text{Player 1's payoff if P3 is reached})$. 按笔记
    $x_3=1$ (指P1拿走P3的全部饼 $\delta^2$)。 P2: P2提议自己拿 $x_2$
    (实际是比例，这里符号有点乱)。P2能给P1的最少是 $x_3 \cdot \delta$
    (这是符号错误，应为P1在P3能拿到的$\delta^2$的价值折现到P2)。
    我们按标准模型和笔记结果来： P3: P1提议，P1得 $\delta^2$, P2得 $0$.
    P2: P2提议。P1的拒绝选项是在P3得到 $\delta^2$ (折现到P2是
    $\delta \cdot \delta^2 = \delta^3$ -- 这种理解是错误的)。
    正确理解：如果P2拒绝P1在P3的提议，P2得到0。所以P1在P3提议
    $(x_3=1, 1-x_3=0)$，P1得 $\delta^2$, P2得 $0$。 P2:
    P2提议。P1知道如果拒绝，P1在P3会得到
    $\delta^2$。所以P1在P2接受的条件是自己得到的份额
    $\ge \delta \cdot (\text{P1在P3的份额}) = \delta \cdot \delta^2 = \delta^3$。
    这是错误的。 P1在P3得到的是当时的全部 $\delta^2$
    (未折现的，因为那是P3的支付)。P2提议时，P1比较的是P2给他的 和
    他在P3能得到的(折现到P2)。所以P1要求
    $\text{share from P2} \ge \delta \cdot \delta^2$。

按笔记的 $x_i$ 定义 (当期提议者提议留给自己的份额)： Period 3 (P1提议,
总额 $\delta^2$): P1提议 $x_3=\delta^2$, P2得0。P1接受。 Period 2
(P2提议, 总额 $\delta$): P1若拒绝，则在P3得到
$\delta \cdot \delta^2 = \delta^3$
(折现到P1时刻)。不对，P1在P3得到的是$\delta^2$，折现到P2时刻是
$\delta \cdot (\text{P1在P3得到的份额}) = \delta \cdot \delta^2$。这还是不对。

让我们严格按照笔记的最终公式和逻辑 ： $x_i$ 是第 $i$
期提议者提议给自己的份额 (相对于当前总额)。 Period 3 (P1提议, 总价值
$\delta^2$): P2会接受任何 $1-x_3 \ge 0$ (指分配比例)。P1提议 $x_3=1$
(P1拿全部)。P1得 $\delta^2 \cdot 1 = \delta^2$。P2得 $0$。 Period 2
(P2提议, 总价值 $\delta$): P1若拒绝，P1在P3得到的份额是 $\delta^2$
(这是P3的价值)。P1在P2时，P3的价值折现为 $\delta \cdot \delta^2$
(P1在P3得到的份额 $\times$ P3的价值)。 P1在P2接受条件是：
$1-x_2 \ge \delta x_3^*$ (其中 $x_3^*$
是P1在P3能确保得到的份额，这里是1)。 即
$1-x_2 \ge \delta \cdot 1 \implies (1-x_2)\delta \ge \delta^2 \cdot 1$
(这是P1在P2得到的实际价值)。 P2会使得P1刚好接受，即
$(1-x_2)\delta = \delta^2 \cdot 1 \implies 1-x_2 = \delta \implies x_2 = 1-\delta$
(P2提议自己拿 $1-\delta$ 的比例)。 P2的收益是
$(1-\delta)\delta = \delta-\delta^2$。P1的收益是
$\delta \cdot \delta = \delta^2$。 Period 1 (P1提议, 总价值 $1$):
P2若拒绝，P2在P2能得到的份额是 $(1-\delta)\delta = \delta-\delta^2$。
P1提议自己拿 $x_1$。P2接受条件是
$1-x_1 \ge \delta \cdot (\text{P2在P2得到的份额的比例 } x_2^*) = \delta (1-\delta)$
(这是P2在P2得到的实际价值 $\delta-\delta^2$ 折现到P1)。 即
$1-x_1 \ge \delta(1-\delta) = \delta-\delta^2$。 P1会使得P2刚好接受，即
$x_1 = 1 - (\delta-\delta^2) = 1-\delta+\delta^2$。 P1的收益是
$1-\delta+\delta^2$。P2的收益是 $\delta-\delta^2$。

当 $T \to +\infty$:
$x_1 = 1 - \delta + \delta^2 - \delta^3 + \dots = \frac{1}{1+\delta}$
$1-x_1 = \frac{\delta}{1+\delta}$ 参与人1 (先出价者) 得到
$\frac{1}{1+\delta}$，参与人2得到
$\frac{\delta}{1+\delta}$。存在先动优势。

**稳态均衡 (Stationary Equilibrium)**:
假设参与人在相似情境下做出的决策相同。即 $x_1 = x_3 = x_5 = \dots = x^*$
(P1的提议)。$x_2 = x_4 = \dots = \hat{x}$ (P2的提议)。 P1提议
$x^*$。P2接受条件: $1-x^* \ge \delta \hat{x}$
(P2在下一期自己提议能得到的折现值)。P1会给P2刚好使其接受:
$1-x^* = \delta \hat{x}$ (1) P2提议 $\hat{x}$。P1接受条件:
$1-\hat{x} \ge \delta x^*$
(P1在下一期自己提议能得到的折现值)。P2会给P1刚好使其接受:
$1-\hat{x} = \delta x^*$ (2) 联立 (1) (2): $\hat{x} = 1-\delta x^*$
$1-x^* = \delta (1-\delta x^*) = \delta - \delta^2 x^*$
$1-\delta = x^*(1-\delta^2) = x^*(1-\delta)(1+\delta)$
$x^* = \frac{1}{1+\delta}$
$\hat{x} = 1 - \frac{\delta}{1+\delta} = \frac{1}{1+\delta}$
所以，P1在P1提议自己拿 $\frac{1}{1+\delta}$，P2接受。P2会得到
$1-x^* = \frac{\delta}{1+\delta}$。

# 重复博弈 (Repeated Games)

当同一个策略型博弈 (称为阶段博弈 stage game)
被参与人重复进行多次时，就构成了重复博弈。参与人可以根据博弈的历史来选择当前阶段的行动。

## 有限重复博弈

如果阶段博弈有唯一的纳什均衡，那么有限次重复该博弈的唯一子博弈完美纳什均衡
(SPE) 是在每个阶段都进行该纳什均衡。

::: example
**例子 11** (有限重复囚徒困境). *阶段博弈 (H=合作/沉默,
L=背叛/坦白，这里L是支配策略): $$\begin{array}{c|cc}
     & \text{H} & \text{L} \\
    \hline
    \text{H} & 3,3 & -1,4 \\
    \text{L} & 4,-1 & 0,0 \\ % 笔记中此处为0,0，经典为1,1或类似值
\end{array}$$ 阶段博弈的唯一纳什均衡是 (L,L)。 如果重复2期： Period 2:
无论Period 1发生什么，Period 2本身是一个独立的博弈，唯一纳什均衡是
(L,L)。 Period 1: 参与人预料到Period 2的结果是 (L,L)，所以在Period
1也会选择 (L,L)。 结论：对于N期重复，唯一的SPE是每期都选择 (L,L)。*
:::

::: example
**例子 12** (有限重复协调博弈). *阶段博弈: $$\begin{array}{c|cc}
     & \text{A} & \text{B} \\
    \hline
    \text{A} & 1,1 & 0,0 \\
    \text{B} & 0,0 & 2,2 \\
\end{array}$$ 阶段博弈有多个纳什均衡: (A,A), (B,B) 和一个混合策略均衡。
如果重复2期 : 可以构建这样的SPE： 策略1:*

-   *Period 1: 选择B。*

-   *Period 2: 如果Period
    1是(B,B)，则选择(B,B)；否则（如出现(B,A)或(A,B)或(A,A)），则选择(A,A)
    (或者某个惩罚性的均衡)。*

*如果双方都遵循这个策略，那么在Period 1选择B，得到(2,2)；Period
2继续(B,B)，得到(2,2)。总效用较高。 如果一方在Period
1偏离（比如从B到A，而对方选B），则Period 1得到(0,0)，Period
2会进入(A,A)得到(1,1)。
这种依赖历史的策略可以支持非阶段博弈纳什均衡的合作结果。 笔记中提到策略
:*

-   *Period 2: 若Period 1是(A,A)或(A,B)或(B,A)，则Period
    2选(A,A)。若Period 1是(B,B)，则Period 2选(B,B)。*

-   *此时Period 1: 若选(B,B)，则总收益是 $2+2=4$。若选(A,A)，则总收益是
    $1+1=2$。
    因此，(B,B)在所有时期是一个SPE。同理，(A,A)在所有时期也是一个SPE。*
:::

## 无限重复博弈

当博弈无限期重复，或者参与人不知道博弈何时结束（以一定概率持续），逆向归纳法不再适用。
引入**折扣因子 (Discount Factor)** $\delta \in [0,1]$。$\delta$
表示未来收益相对于当前收益的价值。如果每期收益为 $u_t$，则总贴现收益为
$\sum_{t=0}^{\infty} \delta^t u_t$。

::: example
**例子 13** (无限重复囚徒困境). *阶段博弈同上，纳什均衡 (L,L) 支付
(0,0)。合作 (H,H) 支付 (3,3)。 **冷酷触发策略 (Grim Trigger
Strategy)**:*

1.  *在第一期选择 H (合作)。*

2.  *在之后的每一期：如果历史上所有时期双方都选择了 H，则继续选择 H。*

3.  *否则 (即一旦有任何一方选择了 L)，则永远选择 L (背叛)。*

*分析该策略是否构成SPE (双方都采用此策略)：*

-   ***一直合作 (H)**: 收益
    $= 3 + 3\delta + 3\delta^2 + \dots = \frac{3}{1-\delta}$。*

-   ***在第一期背叛 (L)** (假设对方合作): 收益
    $= 4 + 0\delta + 0\delta^2 + \dots = 4$
    (因为对方从第二期开始会永远选L)。*

-   ***在第 $k$ 期背叛 (L)** (假设对方合作到 $k-1$ 期): 收益
    $= 3 + 3\delta + \dots + 3\delta^{k-1} + 4\delta^k + 0\delta^{k+1} + \dots$*

*为了使"一直合作"成为纳什均衡，需要满足不偏离的条件，即一直合作的收益
$\ge$ 任何时候偏离的收益。 最强的偏离动机在第一期：
$\frac{3}{1-\delta} \ge 4 \implies 3 \ge 4(1-\delta) \implies 3 \ge 4 - 4\delta \implies 4\delta \ge 1 \implies \delta \ge \frac{1}{4}$。
如果折扣因子足够大 ($\delta \ge 1/4$)，那么 (H,H)
可以作为无限重复博弈的一个SPE的结果。*
:::

### Folk Theorem (无名氏定理)

无名氏定理（有多个版本）指出，在无限重复博弈中，如果参与人有足够的耐心
(即
$\delta \to 1$)，那么任何满足以下两个条件的平均支付都可以作为SPE的结果：

1.  **可行性 (Feasible)**:
    该支付向量必须是阶段博弈所有可能纯策略结果（包括通过协调随机化设备达成的）的凸组合
    (convex hull)。即在下图中的可行支付区域内。

2.  **个体理性 (Individually Rational)**:
    每个参与人的平均支付必须至少等于其在阶段博弈中的最小最大支付 (minmax
    payoff)。 最小最大支付
    $\underline{u}_i = \min_{a_{-i}} \max_{a_i} \Pi^i(a_i, a_{-i})$。这是参与人
    $i$ 在最坏情况下（其他参与人试图最小化 $i$
    的支付）能够保证自己得到的最低支付。

图示 :

-   可行支付集 (Feasible Payoffs): 由阶段博弈结果 (0,0), (-1,4), (4,-1),
    (3,3) 构成的凸包。

-   个体理性支付集 (Individually Rational Payoffs):
    $u_i \ge \underline{u}_i$。在本例囚徒困境中，每个参与人的最小最大支付是0（当对方选择L时，自己选择L能得到0；若对方选择H，自己选择L能得到4，所以最差是0）。所以个体理性区域是
    $u_1 \ge 0, u_2 \ge 0$。

Folk定理表明，当 $\delta$
足够接近1时，可行且个体理性的任何支付组合（例如
(3,3)）都可以通过某种SPE来实现。

# 转换成本 (Switching Costs)

当参与人在不同策略或行动之间转换时，需要付出的成本。这种成本会影响动态博弈和重复博弈的结果。
假设博弈进行 $N$ 个时期，每个时期长度为 $\Delta = 1/N$。转换成本为
$\epsilon$。

## 协调博弈中的转换成本

阶段博弈: $$\begin{array}{c|cc}
     & \text{A} & \text{B} \\
    \hline
    \text{A} & 0,0 & 0,0 \\
    \text{B} & 0,0 & 2,2 \\
\end{array}$$ (笔记中的例子是 (A,A)=(1,1), (A,B)=(0,0), (B,A)=(0,0),
(B,B)=(2,2)，这里用的是讲义Page1的 (A,A)=(0,0)版本)
考虑最后几个时期。如果 $\epsilon$ 足够大，例如 $2\Delta > \epsilon$
(或者笔记中 $\epsilon > 2\Delta$？应为转换的收益 $2\Delta$ 小于转换成本
$\epsilon$ 时不转换)。 笔记的逻辑 :

-   当 $t_1 \approx \frac{\epsilon}{2\Delta}$ (表示离结束还有 $t_1$
    个时期，其中 $2\Delta$ 是选择B相对于A的每期额外收益)。 当剩余时期数
    $k$ 使得 $k \cdot (b-a) < \epsilon$ (其中 $b,a$
    为选B,A的收益)，则不会从A转到B。

-   笔记中分析: 当 $t\Delta > \epsilon$ 时，若选A则会变至B。 Unique SPE
    outcome 是 (B,B) 在所有时期。

更一般的协调博弈形式 : $$\begin{array}{c|cc}
     & \text{A} & \text{B} \\
    \hline
    \text{A} & a,a & d,c \\
    \text{B} & c,d & b,b \\
\end{array}$$ 假设 $b>a>c, b>d$。 (B,B) 成为 unique SPE outcome 的条件是
$b-d > a-c$ (B风险占优A，risk dominate)。

## 囚徒困境中的转换成本

阶段博弈 (C=合作, D=背叛): $$\begin{array}{c|cc}
     & \text{C} & \text{D} \\
    \hline
    \text{C} & 3,3 & -1,4 \\
    \text{D} & 4,-1 & 1,1 \\ % 笔记中为1,1
\end{array}$$

-   Incentive to cheat (从C到D，当对方C): $4-3=1$。

-   Incentive to punish
    (从C到D，当对方从C变为D，自己也从C变为D来惩罚或止损): $1-(-1)=2$
    (如果对方变D，我从C变D，收益从-1变1)。

笔记分析 : 如果 $t_2 \approx \frac{\epsilon}{\Delta}$
(转换收益1相较于成本$\epsilon$)，$t_1 \approx \frac{\epsilon}{2\Delta}$。
SPE #1: Play D all the period. SPE #2: 考虑(C,C)能否维持。 (C,D)
$\rightarrow$ (D,D) (D,C) $\rightarrow$ (D,D) (D,D) $\rightarrow$ (D,D)
(C,C) $\rightarrow$ (C,C) 如果转换成本足够影响决策，(C,C)也可能成为SPE。

另一个囚徒困境例子 : $$\begin{array}{c|cc}
     & \text{C} & \text{D} \\
    \hline
    \text{C} & 3,3 & 0,5 \\
    \text{D} & 5,0 & 1,1 \\
\end{array}$$

-   Incentive to cheat: $5-3=2$.

-   Incentive to punish: $1-0=1$.

这里，欺骗的诱惑 (2) 大于惩罚的收益 (1)。 $t_1: (C,C) \rightarrow (D,C)$
(如果一方单方面从C转D) $t_2: C \rightarrow D$ Unique SPE 是
(D,D)\...(D,D)。

一般形式 : $$\begin{array}{c|cc}
     & \text{C} & \text{D} \\
    \hline
    \text{C} & a,a & d,c \\
    \text{D} & c,d & b,b \\
\end{array}$$ 假设 $c>a>b>d$ (经典囚徒困境)。 Incentive to cheat: $c-a$.
Incentive to punish (如果对方从C到D，自己从C到D，收益从d到b): $b-d$.

-   If $c-a > b-d$: unique SPE is (D,D),\...,(D,D).

-   If $c-a < b-d$: (C,C),\...,(C,C) can be one of the SPEs.

## 无限期转换成本

折扣因子 $\delta = e^{-r\Delta} \approx 1-\Delta$ (当 $r=1$,
$\Delta \to 0$)。 参与人 $i$ 的总贴现效用:
$$U_i = \sum_{t=0}^{\infty} \delta^t u_i(a^t) - \sum_{t=0}^{\infty} \delta^t \epsilon \cdot I_i(a^{t+1} \neq a^t)$$
其中 $I_i(a^{t+1} \neq a^t)$ 是一个指示函数，当 $t+1$ 期的行动与 $t$
期不同时为1，否则为0。 **个体理性支付 (Rational Payoff)**
$\underline{V_i}$: 参与人 $i$ 的纯策略最大最小支付 (pure-strategy
maxmin)。这是在没有转换成本的情况下，参与人 $i$ 能确保得到的最低支付。

# 不完全信息博弈 (Incomplete Information Games)

## 基本概念

### 不对称信息 (Asymmetric Information)

在许多现实的经济互动中，参与者拥有的信息往往是不对称的。不完全信息博弈指的是至少有一方参与者不完全了解其他参与者某些特征（例如，支付函数、类型、策略空间等）的博弈。不对称信息是其中的一种情况，即不同的参与者拥有不同的私有信息
。

一个经典的例子是保险市场中的逆向选择（adverse selection）问题
。例如，健康保险公司可能不了解每个客户的真实健康状况，而客户对此则有更充分的信息。高风险客户更倾向于购买保险，这可能导致保险公司面临亏损。

### 贝叶斯均衡 (Bayesian Equilibrium)

在不完全信息博弈中，我们需要一种新的均衡概念来描述参与者的理性行为。贝叶斯纳什均衡（Bayesian
Nash Equilibrium,
BNE）是纳什均衡在不完全信息博弈中的扩展。在贝叶斯纳什均衡中，每个参与者（根据其私有信息，即"类型"）选择一个最大化其期望效用的策略，同时考虑到其他参与者类型的概率分布以及其他参与者的策略。

一个策略组合构成贝叶斯纳什均衡，如果没有任何一个类型的参与者可以通过单方面改变其策略来提高其期望效用，给定其他参与者的策略和关于其他参与者类型的信念。

## 示例分析

### 例1：不确定博弈的选择

考虑一个博弈，其中参与者1（Player 1）不知道正在进行的是博弈1（Game
1）还是博弈2（Game 2）。他只知道博弈1发生的概率为 $q$，博弈2发生的概率为
$1-q$ 。参与者2（Player 2）则完全知晓当前进行的是哪个博弈 。

博弈的支付矩阵如下（(P1收益, P2收益)）：

::: center
   博弈1 (Game 1) - 概率 $q$          
--------------------------- ------- -------
       P1 $\setminus$ P2         C       D
               A               (3,1)   (0,0)
               B               (0,1)   (3,0)

   博弈2 (Game 2) - 概率 $1-q$          
----------------------------- ------- -------
        P1 $\setminus$ P2          C       D
                A                (3,1)   (0,2)
                B                (0,1)   (3,2)
:::

假设参与者2的策略是：在博弈1中选择C，在博弈2中选择D 。
现在我们分析参与者1的最优策略。 如果参与者1选择行动A，他的期望收益为：
$$\Pi_1(A) = q \cdot (\text{A在博弈1中对C的收益}) + (1-q) \cdot (\text{A在博弈2中对D的收益})$$
$$\Pi_1(A) = q \cdot 3 + (1-q) \cdot 0 = 3q \quad \text{}$$
如果参与者1选择行动B，他的期望收益为：
$$\Pi_1(B) = q \cdot (\text{B在博弈1中对C的收益}) + (1-q) \cdot (\text{B在博弈2中对D的收益})$$
$$\Pi_1(B) = q \cdot 0 + (1-q) \cdot 3 = 3 - 3q \quad \text{}$$

参与者1会选择使其期望收益最大化的行动：

-   如果 $\Pi_1(A) \ge \Pi_1(B)$，即
    $3q \ge 3-3q \implies 6q \ge 3 \implies q \ge \frac{1}{2}$，则参与者1选择A
    ($a_1=A$) 。

-   如果 $\Pi_1(A) \le \Pi_1(B)$，即
    $3q \le 3-3q \implies 6q \le 3 \implies q \le \frac{1}{2}$，则参与者1选择B
    ($a_1=B$) 。

当参与者1根据这个规则选择其行动，而参与者2的策略（在博弈1中选C，在博弈2中选D）是对参与者1（可能的）行动的最佳回应时（需要验证这一点），我们就可能找到了一个贝叶斯均衡
。

参与者2的策略 $a_2(\text{type})$
是一种依赖于其类型（即他所知道的博弈是Game 1还是Game
2）的策略，称为类型条件策略 (type contingent strategy) 。
具体来说，参与者2的类型 contingent strategy 是：

-   如果是博弈1 ($t_2=1$)，选择 $a_2(1)=C$ 。

-   如果是博弈2 ($t_2=2$)，选择 $a_2(2)=D$ 。

一个贝叶斯均衡要求每个参与者的类型条件策略都是对其他参与者策略的最佳回应
。

### 例2：不同博弈的纯策略均衡

考虑另一组博弈支付矩阵 ：

::: center
   博弈1 (Game 1) - 概率 $q$          
--------------------------- ------- -------
       P1 $\setminus$ P2         C       D
               A               (3,1)   (0,0)
               B               (0,0)   (3,1)

   博弈2 (Game 2) - 概率 $1-q$          
----------------------------- ------- -------
        P1 $\setminus$ P2          C       D
                A                (3,1)   (0,2)
                B                (0,2)   (3,1)
:::

假设与前例相同，参与者1不知道是哪个博弈，参与者2知道 。

我们来寻找纯策略贝叶斯均衡：

1.  假设参与者1选择 $a_1=A$ 。
    那么参与者2在博弈1中的最佳回应是选择C（收益1 vs 0），即 $a_2(1)=C$
    。 参与者2在博弈2中的最佳回应是选择D（收益2 vs 1），即 $a_2(2)=D$ 。
    给定参与者2的策略 $(a_2(1)=C, a_2(2)=D)$，参与者1选择A的前提是
    $\Pi_1(A) \ge \Pi_1(B)$：
    $\Pi_1(A | (C,D)) = q \cdot 3 + (1-q) \cdot 0 = 3q$
    $\Pi_1(B | (C,D)) = q \cdot 0 + (1-q) \cdot 3 = 3(1-q)$
    所以，$3q \ge 3(1-q) \implies 3q \ge 3-3q \implies 6q \ge 3 \implies q \ge \frac{1}{2}$
    。 因此，如果 $q \ge \frac{1}{2}$，则 $(a_1=A; a_2(1)=C, a_2(2)=D)$
    是一个纯策略贝叶斯均衡。

2.  假设参与者1选择 $a_1=B$ 。
    那么参与者2在博弈1中的最佳回应是选择D（收益1 vs 0），即 $a_2(1)=D$
    。 参与者2在博弈2中的最佳回应是选择C（收益2 vs 1），即 $a_2(2)=C$ 。
    给定参与者2的策略 $(a_2(1)=D, a_2(2)=C)$，参与者1选择B的前提是
    $\Pi_1(B) \ge \Pi_1(A)$：
    $\Pi_1(B | (D,C)) = q \cdot 3 + (1-q) \cdot 0 = 3q$
    $\Pi_1(A | (D,C)) = q \cdot 0 + (1-q) \cdot 3 = 3(1-q)$
    所以，$3q \ge 3(1-q) \implies q \ge \frac{1}{2}$ 。 因此，如果
    $q \ge \frac{1}{2}$，则 $(a_1=B; a_2(1)=D, a_2(2)=C)$
    是另一个纯策略贝叶斯均衡。

笔记中提到，当 $q < \frac{1}{2}$ 时没有纯策略均衡
。这是因为在上述分析中，如果
$q < \frac{1}{2}$，则参与者1会偏离假设的策略。

# 拍卖理论 (Auction Theory)

拍卖是将物品或服务出售给出价最高者（或在某些情况下，出价最低者）的一种市场机制。拍卖与明码标价、协商定价等是并列的定价方式
。

## 拍卖类型简介

有多种不同规则的拍卖形式，常见的有：

-   **英式拍卖 (English Auction)**: 也称为公开增价拍卖（open bid
    auctions）。价格从低到高逐渐上升，竞标者不断出更高的价格，直到没有人愿意出更高价格为止，最后出价最高者以其出价赢得拍卖品
    。

-   **荷兰式拍卖 (Dutch Auction)**:
    价格从高到低逐渐下降，第一个表示接受当前价格的竞标者赢得拍卖品并支付该价格
    。

-   **第一价格密封投标拍卖 (First-Price Sealed-Bid Auction)**:
    每个竞标者独立地、秘密地提交一个报价（bid），报价最高者赢得拍卖品，并支付其自己报出的价格
    。

-   **第二价格密封投标拍卖 (Second-Price Sealed-Bid Auction)**:
    也称为维克里拍卖（Vickrey
    Auction）。每个竞标者独立地、秘密地提交一个报价，报价最高者赢得拍卖品，但仅需支付所有报价中第二高的价格
    。

-   **全支付拍卖 (All-Pay Auction)**:
    所有竞标者都支付他们报出的价格，无论他们是否赢得拍卖品。出价最高者获得拍卖品
    。

## 第二价格密封投标拍卖 (Second-Price Sealed-Bid Auction)

这是一种重要的拍卖形式，因为它具有一些优良的性质。

假设有两个竞标者参与拍卖。每个竞标者 $i$ 对拍卖品有一个私有价值（private
value）$v_i$，即该物品对其的真实价值 。竞标者 $i$ 对自己的 $v_i$
清楚，但不知道其他竞标者的私有价值。我们假设 $v_i$
是从某个概率分布中抽取的。竞标者 $i$ 提交的报价为 $b_i$ 。

### 弱占优策略：$b_i = v_i$

在第二价格密封投标拍卖中，对于每个竞标者 $i$ 来说，诚实报价（即报价
$b_i$ 等于其私有价值 $v_i$）是一个弱占优策略 (weakly dominant strategy)
。这意味着，无论其他竞标者如何报价，竞标者 $i$ 选择 $b_i=v_i$
所带来的收益至少不比选择任何其他报价 $b_i \neq v_i$
差，并且在某些情况下会更好。

**证明思路** (以竞标者1为例，其价值为 $v_1$，报价为
$b_1$，另一竞标者的最高报价为 $b_{max_2}$) ： 我们需要比较 $b_1=v_1$ 和
$b_1 \neq v_1$ 的情况。设 $b_2$
为竞标者2的报价（如果是多个其他竞标者，则 $b_2$
代表其他竞标者中的最高报价）。竞标者1的盈余（surplus）是
$v_1 - \text{支付价格}$（如果赢得拍卖）或0（如果未赢得）。

1.  **情况1: $b_1 > v_1$ (过高报价)**

    -   若 $b_2 \ge b_1$：竞标者1未赢得。如果他报 $v_1$ 且
        $b_2 \ge v_1$，结果相同。如果他报 $v_1$ 且
        $b_1 > b_2 \ge v_1$，报 $v_1$ 也未赢得（或赢得并支付 $b_2$，但
        $v_1-b_2 \le 0$）。

    -   若 $v_1 < b_2 < b_1$：竞标者1赢得并支付 $b_2$。盈余为
        $v_1 - b_2 < 0$。如果他报 $v_1$，他将不会赢得（因为
        $b_2 > v_1$），盈余为0。这种情况下，报 $b_1 > v_1$ 更差 。

    -   若 $b_2 \le v_1$ (且 $b_2 < b_1$): 竞标者1赢得并支付
        $b_2$。盈余为 $v_1 - b_2 \ge 0$。如果他报
        $v_1$，他也会赢得并支付 $b_2$（因为 $v_1 \ge b_2$），盈余相同。

2.  **情况2: $b_1 < v_1$ (过低报价)**

    -   若 $b_2 \le b_1$：竞标者1赢得并支付 $b_2$。盈余为
        $v_1 - b_2 > 0$。如果他报 $v_1$，他也会赢得并支付 $b_2$（因为
        $v_1 > b_1 \ge b_2$），盈余相同。

    -   若 $b_1 < b_2 < v_1$：竞标者1未赢得，盈余为0。如果他报
        $v_1$，他将会赢得并支付 $b_2$。盈余为
        $v_1 - b_2 > 0$。这种情况下，报 $b_1 < v_1$ 更差 。

    -   若 $b_2 \ge v_1$ (且 $b_2 > b_1$): 竞标者1未赢得。如果他报
        $v_1$，他也不会赢得（因为 $b_2 \ge v_1$），盈余相同。

总结来说，与诚实报价 $b_1=v_1$ 相比：

-   报 $b_1 > v_1$：在某些情况下（当 $v_1 < b_2 < b_1$
    时），会导致负盈余，而诚实报价会得到0盈余。在其他情况下，结果与诚实报价相同或不劣于诚实报价。

-   报 $b_1 < v_1$：在某些情况下（当 $b_1 < b_2 < v_1$
    时），会错失获得正盈余的机会，而诚实报价可以获得正盈余。在其他情况下，结果与诚实报价相同或不劣于诚实报价。

因此，$b_i=v_i$ 是一个弱占优策略。

## 推广至N个竞标者

上述结论可以推广到N个竞标者的情况。对于任何竞标者 $i$，将其余 $N-1$
个竞标者中的最高报价视为 $b_{max_{-i}}$ (相当于前述证明中的
$b_2$)，同样的逻辑仍然适用。因此，$b_i=v_i$ 仍然是弱占优策略 。

### 贝叶斯均衡

在第二价格拍卖中，由于诚实报价 $b_i=v_i$ 是每个参与者的弱占优策略，因此
$(b_1=v_1, b_2=v_2, \dots, b_N=v_N)$ 构成一个贝叶斯纳什均衡
。这是一种类型条件策略，其中每个竞标者的报价直接反映其私有价值。

### 示例

假设有两个竞标者，其私有价值分别为 $v_1=10, v_2=12$ 。
根据贝叶斯均衡策略： $b_1 = v_1 = 10$ $b_2 = v_2 = 12$ 竞标者2的报价最高
($b_2=12$)，因此他赢得拍卖品。他需要支付的价格是第二高的报价，即
$b_1=10$。竞标者2的盈余是 $v_2 - b_1 = 12 - 10 = 2$。竞标者1的盈余是0。
如果 $b_1=10, b_2 > 10$（例如 $b_2=12$），竞标者2赢得并支付 \$10 。 如果
$b_1<10$（例如 $b_1=8$）且 $b_2 \ge 10$（例如
$b_2=12$），竞标者2赢得并支付 $b_1=8$ 。 (注：笔记原文中
$b_1<1, b_2 \ge 1$, bidder 2 pays $b_1$。这部分应为如果 $b_2$
是最高价，他支付第二高价。如果 $b_1$ 是第二高价且 $b_1 < b_2$，他支付
$b_1$。) 更精确地说，如果 $b_i$ 是最高出价， $b_j$ 是严格次高出价，则
$i$ 获胜并支付
$b_j$。如果多个出价者出相同的最高价，通常有某种打破僵局的规则。

### 与英式拍卖的等价性

对于卖方而言，英式拍卖和第二价格密封投标拍卖在一定条件下（例如，私有价值模型）通常能产生相同的期望收益
。在英式拍卖中，竞标者会持续出价直到价格略高于其第二高竞争对手愿意支付的价格（或者说，直到价格达到其自身价值，而倒数第二个退出的竞标者其价值决定了最终价格）。

## 第一价格密封投标拍卖 (First-Price Sealed-Bid Auction)

在这种拍卖中，出价最高的竞标者赢得拍卖品，并支付其自己报出的价格。与第二价格拍卖不同，这里不存在诚实报价的占优策略。竞标者面临一个权衡：出价越高，赢得拍卖的概率越大，但一旦赢得，利润（价值 -
价格）就越小。

### 模型设定 (双人，价值服从\[0,1\]均匀分布)

假设有两个竞标者（$i=1,2$）。每个竞标者的私有价值 $v_i$ 是独立同分布
(IID) 的，服从区间 $[0,1]$ 上的均匀分布 ($v_i \sim U[0,1]$)
。每个竞标者只知道自己的 $v_i$。
我们寻找对称的贝叶斯纳什均衡，其中每个竞标者都使用相同的报价函数（bidding
function）$b_i = B(v_i)$，该函数将其私有价值 $v_i$ 映射到一个报价 $b_i$
。我们通常假设 $B(v)$ 是一个严格递增函数 ($B'(v)>0$) 。

对于竞标者1，他假设竞标者2使用报价函数 $B(v_2)$。竞标者1选择其报价 $b_1$
以最大化其期望盈余 $\Pi_1(b_1, v_1)$：
$$\Pi_1(b_1, v_1) = P(\text{竞标者1赢得拍卖}) \cdot (v_1 - b_1)$$
竞标者1赢得拍卖的条件是 $b_1 > B(v_2)$。由于 $B(\cdot)$
单调递增，这等价于 $B^{-1}(b_1) > v_2$ 。 因为
$v_2 \sim U[0,1]$，$P(v_2 < B^{-1}(b_1)) = B^{-1}(b_1)$ （假设
$B^{-1}(b_1)$ 仍在 $[0,1]$ 区间内）。 所以，期望盈余为：
$$\Pi_1(b_1, v_1) = B^{-1}(b_1) \cdot (v_1 - b_1) \quad \text{}$$
竞标者1选择 $b_1$ 来最大化上式。为了找到最优的 $b_1$，我们对 $b_1$
求导并令其等于0。
根据反函数求导法则，$\frac{d B^{-1}(y)}{dy} = \frac{1}{B'(B^{-1}(y))}$
。
$$\frac{\partial \Pi_1}{\partial b_1} = \frac{d B^{-1}(b_1)}{d b_1} (v_1 - b_1) + B^{-1}(b_1) (-1) = 0$$
$$\frac{1}{B'(B^{-1}(b_1))} (v_1 - b_1) - B^{-1}(b_1) = 0 \quad \text{}$$
在对称均衡中，$b_1 = B(v_1)$，所以 $B^{-1}(b_1) = v_1$。将此代入上式：
$$\frac{1}{B'(v_1)} (v_1 - B(v_1)) - v_1 = 0 \quad \text{}$$
$$v_1 - B(v_1) - v_1 B'(v_1) = 0$$
$$v_1 B'(v_1) + B(v_1) = v_1 \quad \text{}$$ 这是一个一阶线性常微分方程
(ODE)。注意到左边是 $(v_1 B(v_1))'$ 的展开式：
$$(v_1 B(v_1))' = v_1 \quad \text{}$$ 两边对 $v_1$ 积分：
$$v_1 B(v_1) = \int v_1 dv_1 = \frac{1}{2} v_1^2 + C \quad \text{}$$
其中 $C$ 是积分常数。 为了确定
$C$，我们考虑边界条件。如果一个竞标者的价值为0
($v_1=0$)，他最优的出价应该是0 ($B(0)=0$)。代入上式：
$0 \cdot B(0) = \frac{1}{2} \cdot 0^2 + C \implies C = 0$ 。
所以，均衡报价函数为： $$B(v_1) = \frac{1}{2} v_1 \quad \text{}$$
这意味着，在有两个竞标者且其价值服从 $[0,1]$
均匀分布的第一价格拍卖中，均衡策略是报出自己价值的一半。

### 模型设定 (N人，一般分布)

现在考虑有 $N$ 个竞标者。每个竞标者的私有价值 $v_i$ 独立同分布于区间
$[\underline{v}, \overline{v}]$，其累积分布函数 (CDF) 为
$F(v_i)$，概率密度函数 (PDF) 为 $f(v_i)$ 。
我们仍然寻找对称的贝叶斯纳什均衡报价函数 $b_i = B(v_i)$，并假设
$B'(v)>0$ 。

假设竞标者1认为其他 $N-1$ 个竞标者都使用报价函数
$B(\cdot)$。竞标者1选择自己的报价
$b_1$（或者等价地，选择一个"伪装"的价值 $\tilde{v}_1$ 使得
$b_1 = B(\tilde{v}_1)$）来最大化其期望效用。 竞标者1的期望效用
$\Pi_1(b_1, v_1)$ 或 $\tilde{\Pi}_1(\tilde{v}_1, v_1)$ (用 $\tilde{v}_1$
表示其选择的报价水平对应的价值) 为：
$$\tilde{\Pi}_1(\tilde{v}_1, v_1) = P(\text{竞标者1以 } B(\tilde{v}_1) \text{ 获胜}) \cdot (v_1 - B(\tilde{v}_1)) \quad \text{}$$
竞标者1获胜的条件是他的报价 $B(\tilde{v}_1)$ 高于其他所有 $N-1$
个人的报价。即 $B(\tilde{v}_1) > B(v_j)$ 对所有 $j \neq 1$。由于
$B(\cdot)$ 单调递增，这等价于 $\tilde{v}_1 > v_j$ 对所有 $j \neq 1$。
其他 $N-1$ 个竞标者的价值都小于 $\tilde{v}_1$ 的概率为
$(F(\tilde{v}_1))^{N-1}$。 所以，
$$\tilde{\Pi}_1(\tilde{v}_1, v_1) = (F(\tilde{v}_1))^{N-1} (v_1 - B(\tilde{v}_1)) \quad \text{}$$
为了使 $\tilde{v}_1 = v_1$ 是最优选择（即诚实地使用自己的价值通过
$B(\cdot)$ 函数来报价），我们需要最大化
$\tilde{\Pi}_1(\tilde{v}_1, v_1)$ 关于 $\tilde{v}_1$，然后代入
$\tilde{v}_1=v_1$。 一阶条件
$\frac{\partial \tilde{\Pi}_1(\tilde{v}_1, v_1)}{\partial \tilde{v}_1} = 0$
在 $\tilde{v}_1 = v_1$ 时成立 ：
$$\frac{\partial \tilde{\Pi}_1}{\partial \tilde{v}_1} = \frac{d(F(\tilde{v}_1))^{N-1}}{d\tilde{v}_1} (v_1 - B(\tilde{v}_1)) + (F(\tilde{v}_1))^{N-1} (-B'(\tilde{v}_1))$$
在 $\tilde{v}_1=v_1$ 时：
$$((F(v_1))^{N-1})' (v_1 - B(v_1)) - (F(v_1))^{N-1} B'(v_1) = 0 \quad \text{}$$
这是一个关于 $B(v_1)$ 的微分方程。
$((F(v_1))^{N-1})' = (N-1)(F(v_1))^{N-2}f(v_1)$。 所以，
$(N-1)(F(v_1))^{N-2}f(v_1) (v_1 - B(v_1)) - (F(v_1))^{N-1} B'(v_1) = 0$。

可以证明（通过求解这个微分方程，通常设定一个边界条件如
$B(\underline{v})=\underline{v}$，如果 $\underline{v}$
是可能的最低价值且在此价值下不会有交易发生，或者更一般地，具有价值
$\underline{v}$ 的竞标者期望收益为0），均衡报价函数为：
$$B(v) = v - \frac{\int_{\underline{v}}^{v} (F(t))^{N-1} dt}{(F(v))^{N-1}} \quad \text{}$$
其中 $t$ 是积分哑变量。 这个表达式也等于
$B(v) = \mathbb{E}[Y_1 | Y_1 < v]$, 其中 $Y_1$ 是其他 $N-1$
个竞标者价值中的最高值。

我们可以验证 $B'(v) > 0$。对上述 $B(v)$ 求导 ：
$$(F(v))^{N-1} (v - B(v)) = \int_{\underline{v}}^{v} (F(t))^{N-1} dt$$
两边对 $v$ 求导：
$$\frac{d(F(v))^{N-1}}{dv} (v - B(v)) + (F(v))^{N-1} (1 - B'(v)) = (F(v))^{N-1} \quad \text{}$$
$$(N-1)(F(v))^{N-2}f(v)(v-B(v)) + (F(v))^{N-1}(1-B'(v)) = (F(v))^{N-1}$$
$$(N-1)(F(v))^{N-2}f(v)(v-B(v)) - (F(v))^{N-1}B'(v) = 0$$
这与我们之前设定的一阶条件一致。从 $B(v)$ 的表达式可以推导出 $B'(v)$
通常为正。

### 另一种推导方法 (基于包络定理)

竞标者1的优化问题是选择 $\tilde{v}_1$ 来最大化
$\tilde{\Pi}_1(\tilde{v}_1, v_1) = (F(\tilde{v}_1))^{N-1} (v_1 - B(\tilde{v}_1))$。
在均衡中，竞标者会选择 $\tilde{v}_1 = v_1$。令
$\Pi_1^*(v_1) = \tilde{\Pi}_1(v_1, v_1)$
为竞标者1在均衡中的最优期望效用。 根据包络定理 (Envelope Theorem)：
$$\frac{d \Pi_1^*(v_1)}{d v_1} = \left. \frac{\partial \tilde{\Pi}_1(\tilde{v}_1, v_1)}{\partial v_1} \right|_{\tilde{v}_1=v_1} \quad \text{}$$
$$\frac{\partial \tilde{\Pi}_1(\tilde{v}_1, v_1)}{\partial v_1} = (F(\tilde{v}_1))^{N-1}$$
所以， $$\frac{d \Pi_1^*(v_1)}{d v_1} = (F(v_1))^{N-1} \quad \text{}$$
两边从 $\underline{v}$ 到 $v$ 积分：
$$\Pi_1^*(v) - \Pi_1^*(\underline{v}) = \int_{\underline{v}}^{v} (F(t))^{N-1} dt \quad \text{}$$
通常，拥有最低可能价值 $\underline{v}$ 的竞标者的期望效用为0，即
$\Pi_1^*(\underline{v})=0$（因为他们几乎不可能获胜，或者即使获胜，出价接近其价值，利润也为0）。
那么，$\Pi_1^*(v) = \int_{\underline{v}}^{v} (F(t))^{N-1} dt$。 又因为
$\Pi_1^*(v) = (F(v))^{N-1} (v - B(v))$，所以
$$(F(v))^{N-1} (v - B(v)) = \int_{\underline{v}}^{v} (F(t))^{N-1} dt$$
$$B(v) = v - \frac{\int_{\underline{v}}^{v} (F(t))^{N-1} dt}{(F(v))^{N-1}}$$
这与之前得到的结果一致。

# 保留价格 (Reserve Price)

卖方在拍卖中可以设定一个保留价格（或最低价格，minimum
price）$r$。如果最高出价低于保留价格
$r$，则物品不会售出（或者卖方自己"买回"物品）。

## 第一价格拍卖中的保留价格

在存在保留价格 $r$ 的情况下，竞标者的行为会受到影响。我们假设
$\underline{v} \le r \le \overline{v}$。 如果竞标者的价值
$v_i < r$，他通常不会出价高于
$r$，因为即使赢了也会亏损。一个关键的边界（或初始）条件是，对于一个价值恰好为
$r$ 的竞标者，他的最优出价是 $r$，即 $B(r)=r$ 。这意味着如果他的价值是
$r$，他愿意支付 $r$，并且期望利润为0。

基于 $B(r)=r$ 这个条件，我们可以修改上一节中 $B(v)$ 的推导。
$$(F(v))^{N-1} (v - B(v)) - (F(r))^{N-1} (r - B(r)) = \int_{r}^{v} (F(t))^{N-1} dt \quad \text{}$$
由于 $B(r)=r$，第二项为0。所以，
$$(F(v))^{N-1} (v - B(v)) = \int_{r}^{v} (F(t))^{N-1} dt$$
$$B(v) = v - \frac{\int_{r}^{v} (F(t))^{N-1} dt}{(F(v))^{N-1}} \quad \text{ for } v \ge r \quad \text{}$$
如果 $v < r$，竞标者通常会出价低于 $r$ (或者不出价，或者出价 $r$
但知道不会以低于 $r$ 的价格成交)。 从这个公式可以看出，如果保留价格 $r$
提高，那么对于任意 $v > r$，积分项 $\int_{r}^{v} (F(t))^{N-1} dt$
会减小，从而导致 $B(v)$ 增大
。即保留价格提高会使得合格的竞标者出价更高。

### 卖方期望收益与最优保留价格

卖方的期望收益 $R^1(r)$ 是所有竞标者价值都低于 $r$
时收益为0（或为卖方自己的保留效用），以及至少有一个竞标者价值高于 $r$
时，最高价值者支付其报价 $B(v_{(N)})$ 的期望值。 令 $v_{(N)}$ 为 $N$
个竞标者中的最高价值。其PDF为 $g_{(N)}(v) = N (F(v))^{N-1} f(v)$。
卖方的期望收益为：
$$R^1(r) = \int_{r}^{\overline{v}} B(v) N (F(v))^{N-1} f(v) dv \quad \text{}$$
代入 $B(v) = v - \frac{\int_{r}^{v} (F(t))^{N-1} dt}{(F(v))^{N-1}}$：
$$R^1(r) = \int_{r}^{\overline{v}} \left( v - \frac{\int_{r}^{v} (F(t))^{N-1} dt}{(F(v))^{N-1}} \right) N (F(v))^{N-1} f(v) dv$$
$$R^1(r) = \int_{r}^{\overline{v}} v N (F(v))^{N-1} f(v) dv - \int_{r}^{\overline{v}} \left( \int_{r}^{v} (F(t))^{N-1} dt \right) N f(v) dv \quad \text{}$$
通过对第二项进行分部积分或改变积分次序（Fubini定理），可以得到（如思考过程所示）：
$$\int_{r}^{\overline{v}} \left( \int_{r}^{v} (F(t))^{N-1} dt \right) N f(v) dv = \int_{r}^{\overline{v}} N (1-F(t)) (F(t))^{N-1} dt \quad \text{}$$
所以，
$$R^1(r) = \int_{r}^{\overline{v}} v N (F(v))^{N-1} f(v) dv - \int_{r}^{\overline{v}} N (1-F(v)) (F(v))^{N-1} dv$$
对 $R^1(r)$ 关于 $r$ 求导并令其等于0，可以找到最优保留价格 $r^*$。
$$\frac{dR^1(r)}{dr} = -r N (F(r))^{N-1} f(r) + N (1-F(r)) (F(r))^{N-1} \quad \text{(Leibniz rule and fundamental theorem of calculus)}$$
令 $\frac{dR^1(r)}{dr} = 0$：
$$-r N (F(r))^{N-1} f(r) + N (1-F(r)) (F(r))^{N-1} = 0$$ 假设
$(F(r))^{N-1} > 0$ (即 $r < \overline{v}$ and $F(r)>0$ for $N>1$),
$$-r f(r) + (1-F(r)) = 0$$ $$r - \frac{1-F(r)}{f(r)} = 0 \quad \text{}$$
这就是确定最优保留价格 $r^*$ 的条件，通常被称为Myerson's optimal reserve
price condition（对于满足某些正则性条件的分布）。这里的
$J(v) = v - \frac{1-F(v)}{f(v)}$ 是所谓的"虚拟价值"(virtual
valuation)。最优保留价格使得最低被接受的竞标者的虚拟价值为0。

如果卖方对物品自身有一个保留效用 $v_0$（即如果物品未售出，卖方获得 $v_0$
的效用），那么最优保留价格 $r^*$ 应该满足：
$$r^* - \frac{1-F(r^*)}{f(r^*)} = v_0 \quad \text{}$$
并且，实际设定的保留价格应该是 $\max(r^*, v_0)$。

**示例：垄断者问题** 当 $N=1$
时（只有一个竞标者，相当于垄断卖方直接向一个买方报价），$F(v)=v$（即
$v \sim U[0,1]$），$f(v)=1$。 保留价格 $r$
就是卖方设定的价格。买方只有当其价值 $v \ge r$ 时才会购买。 卖方收益
$R(r) = P(v \ge r) \cdot r = (1-F(r)) \cdot r = (1-r)r$ 。
$\frac{dR}{dr} = 1-2r = 0 \implies r = \frac{1}{2}$ 。 使用公式
$r - \frac{1-F(r)}{f(r)} = 0 \implies r - \frac{1-r}{1} = 0 \implies r - (1-r) = 0 \implies 2r-1=0 \implies r=\frac{1}{2}$。结果一致。
这与标准垄断定价问题中，如果需求函数为 $Q(p) = 1-F(p)$，边际成本为
$c$，则利润 $\Pi = p Q(p) - c Q(p)$。一阶条件 $\frac{d\Pi}{dp}=0$ 给出
$Q(p) + (p-c)Q'(p)=0 \implies Q(p) + (p-c)(-f(p))=0 \implies p-c = \frac{Q(p)}{f(p)} = \frac{1-F(p)}{f(p)}$。如果
$c=0$，则 $p = \frac{1-F(p)}{f(p)}$，即 $p - \frac{1-F(p)}{f(p)} = 0$ 。

## 第二价格拍卖中的保留价格

在第二价格拍卖中引入保留价格 $r$。规则是：最高出价者 $b_{(N)}$
获胜，当且仅当 $b_{(N)} \ge r$。如果获胜，支付价格为
$\max(r, b_{(N-1)})$，其中 $b_{(N-1)}$ 是第二高出价。如果所有出价都低于
$r$，则物品不售出。由于诚实报价 $b_i=v_i$
仍然是（截断的）占优策略（即如果 $v_i < r$
则不报或报一个不会赢的价格，如果 $v_i \ge r$ 则报
$v_i$），所以分析较为直接。

卖方的期望收益 $R^2(r)$ 由两部分构成：

1.  最高价值 $v_{(N)} \ge r$ 且次高价值 $v_{(N-1)} \ge r$：卖方收到
    $v_{(N-1)}$。

2.  最高价值 $v_{(N)} \ge r$ 且次高价值
    $v_{(N-1)} < r$（或者只有一个竞标者价值 $\ge r$）：卖方收到 $r$。

令 $f_k(v)$ 为第 $k$ 高阶统计量的概率密度函数。$f_2(v)$ （笔记中用
$f_2(v)$ 表示次高价值的PDF，更准确的写法是 $g_{(N-1)}(v)$）为：
$$g_{(N-1)}(v) = N(N-1) f(v) (1-F(v)) (F(v))^{N-2} \quad \text{}$$ (这里
$f_k(v)$ 在笔记 中符号 $f_2(v)$
指的是次高阶统计量的PDF，下标2表示第二高。$f_3(v)$ 同理表示第三高。)
卖方的期望收益可以写为 ：
$$R^2(r) = \int_{r}^{\overline{v}} v \cdot g_{(N-1)}(v \text{ is 2nd highest, and highest is also } \ge v) dv + r \cdot P(\text{exactly one bidder has value } \ge r)$$
更规范的表达是：
$$R^2(r) = \int_{r}^{\overline{v}} v \cdot N(N-1)f(v)(1-F(v))(F(v))^{N-2} dv + r \cdot N (F(r))^{N-1} (1-F(r)) \quad \text{}$$
这里 $N (F(r))^{N-1} (1-F(r))$ 是指最高价值高于 $r$，而其余 $N-1$
个价值都低于 $r$ 的概率（应为
$N(1-F(r))(F(r))^{N-1}$，即一个价值高于r，N-1个低于r的概率）。

对 $R^2(r)$ 关于 $r$ 求导并令其等于0：
$$\frac{dR^2(r)}{dr} = -r \cdot N(N-1)f(r)(1-F(r))(F(r))^{N-2} \quad (\text{from first term by Leibniz})$$
$$+ N(1-F(r))(F(r))^{N-1} \quad (\text{from product rule on } r \cdot N(F(r))^{N-1}(1-F(r)))$$
$$+ r N \left[ -(N-1)F(r)^{N-2}f(r)(1-F(r)) - F(r)^{N-1}f(r) \right] \quad (\text{this needs careful re-derivation from note})$$
根据笔记 中给出的 $\frac{dR}{dr}$ 的各项，化简后得到：
$$\frac{dR^2(r)}{dr} = N(1-F(r))(F(r))^{N-1} - r N f(r) (F(r))^{N-1}$$
$(N-1)(1-F(r))F^{N-2}(r)$ 与第一项求导的直接结果相符。中间的
$N(1-F(r))F^{N-1}(r)$ 来自对第二项
$r P(\text{one above r, N-1 below r})$ 中 $P(\cdot)$部分的求导乘以 $r$
的系数。细节推导见"思考过程"。) 令 $\frac{dR^2(r)}{dr} = 0$，且假设
$(F(r))^{N-1}>0$： $$(1-F(r)) - r f(r) = 0$$
$$r - \frac{1-F(r)}{f(r)} = 0 \quad \text{}$$
这与第一价格拍卖得到的最优保留价格条件完全相同
。这意味着在标准模型下，无论采用第一价格还是第二价格拍卖，最优保留价格的设定是相同的。

笔记中还给出了 $R^1(r) = R^2(r)$
的一个证明概要，即在设定了（相同的）最优保留价格 $r$
的情况下，第一价格拍卖和第二价格拍卖给卖方带来的期望收益是相同的
。这个证明通常依赖于分部积分和对期望收益表达式的巧妙变形。 例如，笔记 中
$R^2(r)$ 的表达式通过分部积分：
$$\int_{r}^{\overline{v}} v N(N-1)(1-F(v))F^{N-2}(v)f(v)dv = \int_{r}^{\overline{v}} v N(1-F(v)) d(F^{N-1}(v))$$
$$= \left[ vN(1-F(v))F^{N-1}(v) \right]_{r}^{\overline{v}} - \int_{r}^{\overline{v}} F^{N-1}(v) d(vN(1-F(v))) dv$$
$$= -rN(1-F(r))F^{N-1}(r) - \int_{r}^{\overline{v}} N F^{N-1}(v) [(1-F(v)) - vf(v)] dv$$
将此结果代回 $R^2(r)$ 的表达式，并与 $R^1(r)$
的表达式进行比较，可以证明二者相等。这实际上是收益等价定理在包含最优保留价格时的体现。

## 收益等价定理 (Revenue Equivalence Theorem)

收益等价定理是拍卖理论中的一个核心结论。

该定理指出，在一系列标准假设下，任何能产生相同结果（即总是将物品分配给具有最高价值的竞标者，并且具有最低可能价值的竞标者期望支付为零）的拍卖机制，都会给卖方带来相同的期望收益
。

标准假设通常包括 ：

1.  有 $N$ 个风险中性的竞标者。

2.  每个竞标者 $i$ 的私有价值 $v_i$ 是从同一概率分布（CDF $F(v)$, PDF
    $f(v)$）中独立抽取的，价值区间为 $[\underline{v}, \overline{v}]$。

3.  竞标者只关心自己的期望盈余（价值 - 支付）。

4.  拍卖机制确保物品总是分配给价值最高的竞标者（效率分配）。

5.  价值为 $\underline{v}$ 的竞标者的期望支付为0（或期望效用为0）。

## 竞标者期望效用与期望支付

考虑一个对称的、单调递增的均衡报价（或行为）策略。令 $\Pi(v)$
为一个类型为 $v$ 的竞标者的期望效用。 笔记中给出的一个设定是 ：
$\Pi_1(\tilde{v}_1, v_1) = P(\text{以类型 } \tilde{v}_1 \text{ 获胜}) v_1 - E[\text{支付} | \text{以类型 } \tilde{v}_1 \text{ 获胜并支付}]$
假设
$P(\text{以类型 } \tilde{v}_1 \text{ 获胜}) = (F(\tilde{v}_1))^{N-1}$
(这是当其他 $N-1$ 人价值都低于 $\tilde{v}_1$
时发生的，例如在第一价格或第二价格拍卖中，如果其他人按其价值的某个增函数出价)。
令 $T(\tilde{v}_1)$ 是当竞标者表现得像类型 $\tilde{v}_1$
并获胜时的期望支付。 则
$\Pi_1(\tilde{v}_1, v_1) = (F(\tilde{v}_1))^{N-1} v_1 - T(\tilde{v}_1)$
(这里的 $T(\tilde{v}_1)$ 是总期望支付，而非条件期望支付)。
(注：更标准的包络定理应用是
$\frac{d\Pi(v)}{dv} = P(\text{类型v获胜})$。笔记中的形式略有不同，但旨在得到支付函数。)

根据笔记 ，通过优化 $\tilde{v}_1$ 得到一阶条件，在 $\tilde{v}_1=v_1$
时：
$$\frac{\partial \Pi_1}{\partial \tilde{v}_1} = \frac{d(F(v_1))^{N-1}}{dv_1} v_1 - T'(v_1) = 0$$
(这里假设 $T(\tilde{v}_1)$ 是类型 $\tilde{v}_1$
的总期望支付函数，而不仅仅是获胜时的支付。) 所以，期望支付函数 $T(v_1)$
的导数为： $$T'(v_1) = v_1 \frac{d(F(v_1))^{N-1}}{dv_1} \quad \text{}$$
积分可得 $T(v_1)$：
$$T(v) = T(\underline{v}) + \int_{\underline{v}}^{v} t \frac{d(F(t))^{N-1}}{dt} dt \quad \text{}$$
令 $H(v) = \int_{\underline{v}}^{v} t ( (F(t))^{N-1} )' dt$。则
$T(v) = T(\underline{v}) + H(v)$ 。

## 卖方总期望收益

卖方的总期望收益 $R$ 是所有 $N$ 个竞标者的期望支付之和。由于对称性，
$$R = N \int_{\underline{v}}^{\overline{v}} T(v) f(v) dv \quad \text{}$$
$$R = N \int_{\underline{v}}^{\overline{v}} (T(\underline{v}) + H(v)) f(v) dv$$
$$R = N T(\underline{v}) \cdot \int_{\underline{v}}^{\overline{v}} f(v) dv + N \int_{\underline{v}}^{\overline{v}} H(v) f(v) dv$$
$$R = N T(\underline{v}) + N \int_{\underline{v}}^{\overline{v}} H(v) f(v) dv \quad \text{(因为 } \int f(v)dv = 1 \text{)} \quad \text{}$$

如果对于所有满足上述条件的拍卖机制，最低类型 $\underline{v}$
的竞标者的期望支付 $T(\underline{v})$
都相同（通常为0），那么这些拍卖机制给卖方带来的总期望收益 $R$ 也将相同
。 例如，在第一价格拍卖、第二价格拍卖和全支付拍卖中（在满足效率分配和
$T(\underline{v})=0$ 条件下），卖方的期望收益是相同的
。这就是收益等价定理的核心内容。

# 共同价值拍卖

在共同价值拍卖 (Common Value Auction)
中，拍卖品的实际价值对于所有竞拍者来说是相同的，但在竞拍时，他们并不知道这个确切的价值。每个竞拍者
$i$ 都会收到一个私人信号
$s_i$，该信号提供了关于这个共同价值的一些信息。竞拍者利用他们的信号来估计物品的价值并决定他们的出价。竞拍者面临的挑战是避免"赢家诅咒"
(Winner's
Curse)，即赢得拍卖可能意味着自己的信号过于乐观，从而导致支付过高的价格。

本讲义探讨第一价格和第二价格共同价值拍卖中的对称贝叶斯纳什均衡
(Symmetric Bayesian Nash Equilibrium)。我们假设竞拍者是风险中性
(risk-neutral) 的，并且旨在最大化其期望利润 (expected profit)。

## 第一价格共同价值拍卖

在第一价格密封投标拍卖 (First-Price Sealed-Bid Auction)
中，竞拍者同时提交他们的出价，而不知道其他人的出价。出价最高的竞拍者赢得物品，并支付其自己的出价金额。

### 情况一：两个竞拍者 (N=2)

让我们考虑一个有两个竞拍者的简单情景。

-   **信号 (Signals)**：每个竞拍者 $i \in \{1,2\}$ 收到一个信号
    $s_i$。假设信号是独立同分布 (IID) 的，服从 $[0,1]$ 上的均匀分布
    (Uniform Distribution)，即
    $s_i \sim \text{IID U}[0,1]$。累积分布函数 (CDF) 为
    $F(x)=x$，概率密度函数 (PDF) 为 $f(x)=1$ (对于 $x \in [0,1]$)。

-   **共同价值 (Common Value)**：物品的共同价值为 $V = s_1 + s_2$。

-   **竞标策略 (Bidding
    Strategy)**：假设竞拍者采用对称且严格递增的竞标函数 $B(s_i)$，其中
    $b_i = B(s_i)$ 是拥有信号 $s_i$ 的竞拍者 $i$ 的出价。

**竞拍者1的期望利润**： 假设竞拍者1的真实信号是
$s_1$，但他考虑如同其信号为 $\tilde{s}_1$ 那样出价，即提交出价
$B(\tilde{s}_1)$。如果竞拍者1的出价高于竞拍者2的出价，即
$B(\tilde{s}_1) > B(s_2)$，则竞拍者1获胜。由于 $B(\cdot)$
是递增的，这等价于 $\tilde{s}_1 > s_2$。 竞拍者1的期望利润 $\pi^1$ 为：
$$\pi^1(\tilde{s}_1, s_1) = P(\text{获胜}) \times [E(\text{价值} | s_1, \text{获胜}) - \text{支付价格}]$$
$$\pi^1(\tilde{s}_1, s_1) = P(s_2 < \tilde{s}_1) \times [E(s_1+s_2 | s_1, s_2 < \tilde{s}_1) - B(\tilde{s}_1)]$$
鉴于 $s_2 \sim U[0,1]$:

-   $P(s_2 < \tilde{s}_1) = F(\tilde{s}_1) = \tilde{s}_1$ (假设
    $\tilde{s}_1 \in [0,1]$)。

-   $E(s_2 | s_2 < \tilde{s}_1) = \frac{\tilde{s}_1}{2}$ (这是
    $U[0, \tilde{s}_1]$ 分布的均值)。

所以，期望利润函数为：
$$\pi^1(\tilde{s}_1, s_1) = \tilde{s}_1 \left( s_1 + \frac{\tilde{s}_1}{2} - B(\tilde{s}_1) \right)$$

**推导均衡竞标策略 $B(s_1)$**: 在对称贝叶斯纳什均衡中，每个竞拍者选择
$\tilde{s}_1 = s_1$ 以最大化其利润。我们可以使用包络定理 (Envelope
Theorem)。对于拥有信号 $s_1$ 的竞拍者1，其优化后的利润为
$\pi^*(s_1) = \pi^1(s_1, s_1)$。 根据包络定理：
$$\frac{d\pi^*(s_1)}{ds_1} = \left. \frac{\partial \pi^1(\tilde{s}_1, s_1)}{\partial s_1} \right|_{\tilde{s}_1=s_1}$$
从
$\pi^1(\tilde{s}_1, s_1) = \tilde{s}_1 s_1 + \frac{\tilde{s}_1^2}{2} - \tilde{s}_1 B(\tilde{s}_1)$，我们有
$\frac{\partial \pi^1(\tilde{s}_1, s_1)}{\partial s_1} = \tilde{s}_1$。
因此，当 $\tilde{s}_1=s_1$ 时： $$\frac{d\pi^*(s_1)}{ds_1} = s_1$$ 对
$s_1$ 积分，并假设 $\pi^*(0)=0$ (信号为0的竞拍者期望利润为零)：
$$\pi^*(s_1) = \int_0^{s_1} x dx = \frac{1}{2}s_1^2$$
我们也知道，根据定义，当 $\tilde{s}_1 = s_1$ 时：
$$\pi^*(s_1) = s_1 \left( s_1 + \frac{s_1}{2} - B(s_1) \right) = \frac{3}{2}s_1^2 - s_1 B(s_1)$$
令 $\pi^*(s_1)$ 的两个表达式相等：
$$\frac{3}{2}s_1^2 - s_1 B(s_1) = \frac{1}{2}s_1^2$$
$$s_1^2 = s_1 B(s_1)$$ 对于 $s_1 > 0$，这意味着 $B(s_1) = s_1$。
所以，对称均衡竞标策略是每个竞拍者出价等于其信号值。

*使用一阶条件 (FOC) 的替代推导*： 对 $\pi^1(\tilde{s}_1, s_1)$ 关于
$\tilde{s}_1$ 求导，并令 $\tilde{s}_1=s_1$ 且导数为0。
$$\frac{\partial \pi^1}{\partial \tilde{s}_1} = \left( s_1 + \frac{\tilde{s}_1}{2} - B(\tilde{s}_1) \right) + \tilde{s}_1 \left( \frac{1}{2} - B'(\tilde{s}_1) \right) = s_1 + \tilde{s}_1 - B(\tilde{s}_1) - \tilde{s}_1 B'(\tilde{s}_1)$$
令 $\tilde{s}_1=s_1$ 且 $\frac{\partial \pi^1}{\partial \tilde{s}_1}=0$:
$$2s_1 - B(s_1) - s_1 B'(s_1) = 0$$ 这是一个一阶线性微分方程：
$(s_1 B(s_1))' = 2s_1$。 积分得到
$s_1 B(s_1) = \int 2x dx = s_1^2 + C$。 使用边界条件 $B(0)=0$ (或者当
$s_1 \to 0$ 时 $B(s_1)$ 不为无穷大)，则 $C=0$。
所以，$s_1 B(s_1) = s_1^2$，这意味着对于 $s_1>0$，$B(s_1)=s_1$。

### 情况二：N 个竞拍者

现在，考虑 $N$ 个竞拍者。

-   **信号 (Signals)**：$s_i \in [\underline{s}, \bar{s}]$
    是独立同分布的，其累积分布函数为 $F(\cdot)$，概率密度函数为
    $f(\cdot)$。

-   **共同价值 (Common Value)**：$V = \sum_{i=1}^N s_i$。

-   **竞标策略 (Bidding Strategy)**：对称且递增的 $B(s_i)$。

**竞拍者1的期望利润**： 拥有信号 $s_1$ 的竞拍者1考虑出价
$B(\tilde{s}_1)$。如果 $B(\tilde{s}_1)$
是最高出价，则竞拍者1获胜，这意味着 $\tilde{s}_1$ 大于所有其他 $N-1$
个信号 $s_j$ ($j \neq 1$)。此事件的概率为
$P(\max_{j \neq 1} s_j < \tilde{s}_1) = [F(\tilde{s}_1)]^{N-1}$。
期望利润为：
$$\pi^1(\tilde{s}_1, s_1) = [F(\tilde{s}_1)]^{N-1} \left( E\left[\sum_{k=1}^N s_k \middle| s_1, \max_{j \neq 1} s_j < \tilde{s}_1 \right] - B(\tilde{s}_1) \right)$$
$$E\left[\sum_{k=1}^N s_k \middle| s_1, \max_{j \neq 1} s_j < \tilde{s}_1 \right] = s_1 + (N-1) E[s_j | s_j < \tilde{s}_1]$$
其中
$E[s_j | s_j < \tilde{s}_1] = \int_{\underline{s}}^{\tilde{s}_1} x \frac{f(x)}{F(\tilde{s}_1)} dx$。
所以， $$\begin{aligned}
\pi^1(\tilde{s}_1, s_1) &= [F(\tilde{s}_1)]^{N-1} \left( s_1 + (N-1) \frac{\int_{\underline{s}}^{\tilde{s}_1} x f(x) dx}{F(\tilde{s}_1)} - B(\tilde{s}_1) \right) \\
&= [F(\tilde{s}_1)]^{N-1} s_1 + (N-1)[F(\tilde{s}_1)]^{N-2} \int_{\underline{s}}^{\tilde{s}_1} x f(x) dx - [F(\tilde{s}_1)]^{N-1} B(\tilde{s}_1)
\end{aligned}$$

**推导均衡竞标策略 $B(s_1)$**: 令 $\pi^*(s_1) = \pi^1(s_1, s_1)$
为均衡利润。根据包络定理：
$$\frac{d\pi^*(s_1)}{ds_1} = \left. \frac{\partial \pi^1(\tilde{s}_1, s_1)}{\partial s_1} \right|_{\tilde{s}_1=s_1}$$
从 $\pi^1(\tilde{s}_1, s_1)$
的表达式可知，$\frac{\partial \pi^1}{\partial s_1} = [F(\tilde{s}_1)]^{N-1}$。
所以，当 $\tilde{s}_1=s_1$ 时：
$$\frac{d\pi^*(s_1)}{ds_1} = [F(s_1)]^{N-1}$$ 从 $\underline{s}$ 积分
(假设
$\pi^*(\underline{s})=0$，即具有最低可能信号的竞拍者的期望利润为零)：
$$\pi^*(s_1) = \int_{\underline{s}}^{s_1} [F(x)]^{N-1} dx$$
根据定义，均衡利润也为：
$$\pi^*(s_1) = [F(s_1)]^{N-1} s_1 + (N-1)[F(s_1)]^{N-2} \int_{\underline{s}}^{s_1} x f(x) dx - [F(s_1)]^{N-1} B(s_1)$$
令 $\pi^*(s_1)$ 的两个表达式相等，并解出 $B(s_1)$：
$$[F(s_1)]^{N-1} B(s_1) = [F(s_1)]^{N-1} s_1 + (N-1)[F(s_1)]^{N-2} \int_{\underline{s}}^{s_1} x f(x) dx - \int_{\underline{s}}^{s_1} [F(x)]^{N-1} dx$$
$$B(s_1) = s_1 + (N-1)\frac{\int_{\underline{s}}^{s_1} x f(x) dx}{F(s_1)} - \frac{\int_{\underline{s}}^{s_1} [F(x)]^{N-1} dx}{[F(s_1)]^{N-1}}$$
这是第一价格共同价值拍卖中的一般对称均衡竞标策略。

## 第二价格共同价值拍卖

在第二价格密封投标拍卖 (Second-Price Sealed-Bid
Auction)，也称为维克里拍卖 (Vickrey Auction)
中，竞拍者提交密封出价。出价最高的竞拍者获胜，但支付第二高出价的价格。

### 情况一：两个竞拍者 (N=2)，价值 $V=s_1+s_2$

-   **信号 (Signals)**：$s_i \sim \text{IID U}[0,1]$。

-   **共同价值 (Common Value)**：$V = s_1 + s_2$。

-   **声称的均衡策略 (Claimed Equilibrium Strategy)**：$B(s_i) = 2s_i$。

**验证 $B(s_i) = 2s_i$**： 假设竞拍者2采用策略
$B_2(s_2) = 2s_2$。拥有信号 $s_1$ 的竞拍者1选择出价 $b_1$
以最大化其期望利润。 如果
$b_1 > B_2(s_2) = 2s_2$，则竞拍者1获胜，这意味着 $s_2 < b_1/2$。
如果竞拍者1获胜，他支付 $B_2(s_2) = 2s_2$。他的利润为
$V - 2s_2 = (s_1+s_2) - 2s_2 = s_1-s_2$。 竞拍者1出价 $b_1$ 的期望利润为
(假设 $b_1/2 \le 1$，即 $b_1 \le 2$)：
$$E[\pi_1(b_1)] = \int_0^{b_1/2} (s_1 - s_2) f(s_2) ds_2$$ 由于
$s_2 \sim U[0,1]$，$f(s_2)=1$：
$$E[\pi_1(b_1)] = \int_0^{b_1/2} (s_1 - s_2) ds_2 = \left[ s_1 s_2 - \frac{s_2^2}{2} \right]_0^{b_1/2} = s_1 \frac{b_1}{2} - \frac{(b_1/2)^2}{2} = \frac{s_1 b_1}{2} - \frac{b_1^2}{8}$$
为了最大化关于 $b_1$ 的期望利润，我们取一阶条件：
$$\frac{\partial E[\pi_1(b_1)]}{\partial b_1} = \frac{s_1}{2} - \frac{2b_1}{8} = \frac{s_1}{2} - \frac{b_1}{4}$$
令其为零： $$\frac{s_1}{2} - \frac{b_1}{4} = 0 \implies b_1 = 2s_1$$
因此，如果竞拍者2出价 $2s_2$，竞拍者1的最佳反应是出价 $2s_1$。这证实了
$B(s_i)=2s_i$ 是一个对称贝叶斯纳什均衡策略。

### 情况二：两个竞拍者 (N=2)，一般价值函数 $V(s_1,s_2)$

假设一个一般的对称价值函数 $V(s_1,s_2) = V(s_2,s_1)$，且
$\frac{\partial V}{\partial s_i} > 0$。竞拍者使用对称、递增的竞标函数
$B(s_i)$。

**竞拍者1的期望利润**： 拥有信号 $s_1$ 的竞拍者1考虑提交对应于类型
$\tilde{s}_1$ 的出价，即 $B(\tilde{s}_1)$。竞拍者2出价 $B(s_2)$。 如果
$B(\tilde{s}_1) > B(s_2)$，或 $\tilde{s}_1 > s_2$ (因为 $B(\cdot)$
递增)，则竞拍者1获胜。如果获胜，他支付 $B(s_2)$。 期望利润
$\pi^1(\tilde{s}_1, s_1)$ 为：
$$\pi^1(\tilde{s}_1, s_1) = \int_{\underline{s}}^{\tilde{s}_1} [V(s_1, s_2) - B(s_2)] f(s_2) ds_2$$
注意：$s_2 \le \tilde{s}_1$ 的概率为
$F(\tilde{s}_1)$。该表达式也可以写成：
$$\pi^1(\tilde{s}_1, s_1) = F(\tilde{s}_1) \left( E[V(s_1,s_2)|s_1, s_2 \le \tilde{s}_1] - E[B(s_2)|s_2 \le \tilde{s}_1] \right)$$
展开后即为：
$$\pi^1(\tilde{s}_1, s_1) = \int_{\underline{s}}^{\tilde{s}_1} V(s_1,s_2)f(s_2)ds_2 - \int_{\underline{s}}^{\tilde{s}_1} B(s_2)f(s_2)ds_2$$

**推导均衡竞标策略 $B(s_1)$**: 为了找到最优的 $\tilde{s}_1$，我们对
$\pi^1(\tilde{s}_1, s_1)$ 关于 $\tilde{s}_1$ 求导
(使用莱布尼茨积分法则)：
$$\frac{\partial \pi^1(\tilde{s}_1, s_1)}{\partial \tilde{s}_1} = [V(s_1, \tilde{s}_1) - B(\tilde{s}_1)] f(\tilde{s}_1)$$
在均衡中，竞拍者会选择
$\tilde{s}_1=s_1$，并且此导数必须为零以实现利润最大化：
$$[V(s_1, s_1) - B(s_1)] f(s_1) = 0$$ 假设在相关信号范围内 $f(s_1) > 0$
(即信号的概率密度不为零)，则必须有： $$B(s_1) = V(s_1, s_1)$$
这意味着，在两人第二价格共同价值拍卖中，均衡策略是：每个竞拍者 $i$
的出价等于"假设另一个竞拍者的信号 $s_j$ 与自己的信号 $s_i$
相同时，物品的价值"。

**例子**：如果 $V(s_1,s_2) = s_1+s_2$。那么
$B(s_1) = V(s_1,s_1) = s_1+s_1 = 2s_1$。这与第3.1节中针对特定价值函数推导出的结果一致。

### N 个竞拍者 ($N \ge 2$) 的讨论

规则 $B(s_1) = V(s_1,s_1)$ 特定于 $N=2$ 的情况，其中 $V(s_1,s_1)$
作为具有两个相同参数的价值函数是明确定义的。对于 $N > 2$
个竞拍者，这个规则如何推广？

考虑共同价值 $V = \sum_{i=1}^N s_i$。

-   对于 $N=2$，$B(s_1) = 2s_1$。

-   对于 $N>2$，如果有人简单地将 $V(s_1,s_1)$ 的想法扩展到
    $V(s_1,s_1,\dots,s_1)$ (即假设所有其他 $N-1$ 个人的信号都等于
    $s_1$)，这将意味着 $B(s_1) = Ns_1$。 然而，$Ns_1$ 通常不是此模型中
    $N>2$ 时的均衡竞标策略。原始笔记在与 $N=2$ 时 $2s_1$
    的结果比较时，正确地指出对于 $N>2$，$B(s_1) \neq Ns_1$。

对于对称第二价格共同价值拍卖的一个更一般的结果 (Milgrom and Weber, 1982)
是，拥有信号 $s_i$ 的竞拍者 $i$ 出价：
$$B(s_i) = E[V | s_i, Y_1 = s_i]$$ 其中 $Y_1 = \max_{j \neq i} s_j$
是其他 $N-1$
个竞拍者中的最高信号。出价是物品的期望价值，条件是基于自己的信号 $s_i$
以及 $s_i$ 是其竞争对手中最高信号的值
(这是其出价对获胜或决定支付价格起作用的条件)。

让我们将此应用于 $V = \sum_{k=1}^N s_k$：
$$B(s_i) = E\left[s_i + \sum_{j \neq i} s_j \middle| s_i, \max_{j \neq i} s_j = s_i \right]$$
$$B(s_i) = s_i + E\left[\max_{j \neq i} s_j \middle| \max_{j \neq i} s_j = s_i \right] + E\left[\sum_{k \neq i, k \text{ 不是最高信号者}} s_k \middle| \max_{j \neq i} s_j = s_i \right]$$
给定条件 $\max_{j \neq i} s_j = s_i$，第二项是 $s_i$。第三项是其他 $N-2$
个信号的总和，这些信号都小于 $s_i$ (因为 $Y_1$ 是除了 $s_i$
以外其他信号中的最大值，且 $Y_1 = s_i$) 。
$$B(s_i) = s_i + s_i + (N-2) E[s_k | s_k < s_i] = 2s_i + (N-2) E[s_k | s_k < s_i]$$
如果信号 $s_k \sim \text{IID U}[0,1]$，那么
$E[s_k | s_k < s_i] = s_i/2$。 所以，均衡竞标策略是：
$$B(s_i) = 2s_i + (N-2)\frac{s_i}{2} = 2s_i + \frac{N}{2}s_i - s_i = s_i + \frac{N}{2}s_i = \left(1 + \frac{N}{2}\right)s_i$$
对于 $N=2$，这得到 $B(s_i) = (1+2/2)s_i = 2s_i$，这是一致的。 对于
$N>2$，$(1+N/2)s_i \neq Ns_i$ (例如，对于
$N=3$，$(1+3/2)s_i = 2.5s_i$，而 $Ns_i=3s_i$)。这证实了笔记中关于简单
$Ns_1$ 规则对于 $N>2$ 通常不正确的论断。

# 机制设计：双寡头拍卖

## 机制设计基本概念

机制设计（Mechanism
Design）是经济学和博弈论的一个分支，它研究如何设计交易规则或制度（即"机制"），以在参与者具有私人信息并追求自身利益最大化的情况下，达成特定的社会或经济目标（如效率、收益最大化等）。机制设计者设定博弈的规则，而参与者在这些规则下进行策略性互动。

## 显示原理

显示原理（Revelation
Principle）是机制设计中的一个奠基性成果。它指出，对于任何一个间接机制（参与者可能需要进行复杂的策略性思考和行动）所能达成的任何贝叶斯纳什均衡结果，总能找到一个等价的\*\*直接机制\*\*（Direct
Mechanism）。在直接机制中，所有参与者只需向机制设计者报告他们的私人信息（例如，对物品的真实估价），并且真实地报告其私人信息对每个参与者来说都是最优策略（即构成一个贝叶斯纳什均衡）。这个直接机制能够实现与原间接机制相同的社会选择结果（例如，谁获得物品，支付多少）。

因此，显示原理极大地简化了机制设计问题：我们无需考虑所有可能的复杂机制，只需在所有\*\*激励相容的直接机制\*\*（Direct
Incentive Compatible, DIC Mechanisms）中寻找最优机制即可。

## 环境描述

-   **参与者**：有两个竞标者（Bidder），编号为
    $i=1, 2$。另有一个卖方（Seller）。

-   **物品**：卖方拥有一个不可分割的物品待售。卖方对物品的估值为0。

-   **竞标者估价**：每个竞标者 $i$ 对物品有一个私人估价
    $v_i$。这些估价是独立同分布的（i.i.d.）。

-   **估价分布**：每个竞标者的估价 $v_i$ 从集合 $\{1, 2\}$
    中抽取，具体概率为：

    -   $P(v_i=1) = \frac{1}{3}$

    -   $P(v_i=2) = \frac{2}{3}$

-   **风险态度**：所有竞标者和卖方都是风险中性的（risk-neutral），即他们只关心期望收益/效用。

-   **机制类型**：我们关注直接机制，其中竞标者报告其估价（可能真实也可能虚报）。设
    $\tilde{v}_i$ 为竞标者 $i$ 报告的估价。

## 机制变量

一个直接机制由以下两部分定义：

-   **分配规则 (Allocation Rule)** $P_i(\tilde{v}_1, \tilde{v}_2)$:
    当竞标者1报告 $\tilde{v}_1$，竞标者2报告 $\tilde{v}_2$ 时，竞标者
    $i$ 获得物品的概率。 由于只有一个物品，必须满足
    $P_1(\tilde{v}_1, \tilde{v}_2) + P_2(\tilde{v}_1, \tilde{v}_2) \le 1$。如果和小于1，则表示卖方保留物品。

-   **支付规则 (Payment Rule)** $T_i(\tilde{v}_1, \tilde{v}_2)$:
    当竞标者1报告 $\tilde{v}_1$，竞标者2报告 $\tilde{v}_2$ 时，竞标者
    $i$ 向卖方支付的期望金额。

我们的目标是设计 $(P_i, T_i)$
以最大化卖方的期望收益，同时满足激励相容和个体理性约束。

# 激励相容约束 (Incentive Compatibility - IC)

## 定义与目标

激励相容约束要求，在直接机制中，每个竞标者都有动机真实地报告其私人估价。换言之，假设其他竞标者都真实报告，那么某个竞标者真实报告自己类型所获得的期望效用，应不小于其谎报任何其他类型所能获得的期望效用。

## 竞标者1的IC约束

我们以竞标者1为例。假设竞标者2真实报告其估价
$v_2$。竞标者1的期望效用是其赢得物品的概率乘以其真实估价，减去其期望支付。
令 $U_1(v_1, \tilde{v}_1)$ 表示竞标者1真实估价为 $v_1$ 但报告估价为
$\tilde{v}_1$ 时的期望效用。该期望是针对竞标者2的真实估价 $v_2$
的不同可能性计算的。
$$U_1(v_1, \tilde{v}_1) = E_{v_2} [P_1(\tilde{v}_1, v_2) \cdot v_1 - T_1(\tilde{v}_1, v_2)]$$
激励相容要求对于所有的 $v_1, \tilde{v}_1$:
$U_1(v_1, v_1) \ge U_1(v_1, \tilde{v}_1)$。

具体到本例中，对竞标者1：

1.  **当真实估价 $v_1=1$ 时（向上约束，防止低估价者谎报为高估价者）：**
    报告 $\tilde{v}_1=1$ 的期望效用 $\ge$ 报告 $\tilde{v}_1=2$
    的期望效用。 $$\begin{aligned}
        & E_{v_2}[P_1(1,v_2)\cdot 1 - T_1(1,v_2)] \ge E_{v_2}[P_1(2,v_2)\cdot 1 - T_1(2,v_2)] \\
        \Leftrightarrow \quad & \frac{1}{3}[P_1(1,1)\cdot 1 - T_1(1,1)] + \frac{2}{3}[P_1(1,2)\cdot 1 - T_1(1,2)] \\
        & \ge \frac{1}{3}[P_1(2,1)\cdot 1 - T_1(2,1)] + \frac{2}{3}[P_1(2,2)\cdot 1 - T_1(2,2)] \quad \cdots \quad (IC_{1 \to 2})
        
    \end{aligned}$$ 

2.  **当真实估价 $v_1=2$ 时（向下约束，防止高估价者谎报为低估价者）：**
    报告 $\tilde{v}_1=2$ 的期望效用 $\ge$ 报告 $\tilde{v}_1=1$
    的期望效用。 $$\begin{aligned}
        & E_{v_2}[P_1(2,v_2)\cdot 2 - T_1(2,v_2)] \ge E_{v_2}[P_1(1,v_2)\cdot 2 - T_1(1,v_2)] \\
        \Leftrightarrow \quad & \frac{1}{3}[P_1(2,1)\cdot 2 - T_1(2,1)] + \frac{2}{3}[P_1(2,2)\cdot 2 - T_1(2,2)] \\
        & \ge \frac{1}{3}[P_1(1,1)\cdot 2 - T_1(1,1)] + \frac{2}{3}[P_1(1,2)\cdot 2 - T_1(1,2)] \quad \cdots \quad (IC_{2 \to 1})
        
    \end{aligned}$$ 

由于对称性，对竞标者2也存在类似的IC约束。

## 期中概率与期中支付

为了简化IC约束的表达，我们定义"期中"（interim）概念。期中指的是在竞标者知道自己的私人估价之后，但在知道其他竞标者估价之前。
对于竞标者1，当其报告估价为 $\tilde{v}_1$ 时：

-   **期中获胜概率 $P_1(\tilde{v}_1)$**:
    $$P_1(\tilde{v}_1) = E_{v_2}[P_1(\tilde{v}_1, v_2)] = P(v_2=1)P_1(\tilde{v}_1,1) + P(v_2=2)P_1(\tilde{v}_1,2)$$
    具体地： $$\begin{aligned}
        P_1(1) &= \frac{1}{3}P_1(1,1) + \frac{2}{3}P_1(1,2) \\
        P_1(2) &= \frac{1}{3}P_1(2,1) + \frac{2}{3}P_1(2,2)
        
    \end{aligned}$$

-   **期中期望支付 $T_1(\tilde{v}_1)$**:
    $$T_1(\tilde{v}_1) = E_{v_2}[T_1(\tilde{v}_1, v_2)] = P(v_2=1)T_1(\tilde{v}_1,1) + P(v_2=2)T_1(\tilde{v}_1,2)$$
    具体地： $$\begin{aligned}
        T_1(1) &= \frac{1}{3}T_1(1,1) + \frac{2}{3}T_1(1,2) \\
        T_1(2) &= \frac{1}{3}T_1(2,1) + \frac{2}{3}T_1(2,2)
        
    \end{aligned}$$

## IC约束的简化形式

使用期中量，竞标者1的IC约束可以重写为： $$\begin{aligned}
P_1(1) \cdot 1 - T_1(1) &\ge P_1(2) \cdot 1 - T_1(2) \quad &(IC'_{1 \to 2}) \label{eq:ic1_simple} \\
P_1(2) \cdot 2 - T_1(2) &\ge P_1(1) \cdot 2 - T_1(1) \quad &(IC'_{2 \to 1}) \label{eq:ic2_simple}
\end{aligned}$$

## IC约束的推论

1.  **获胜概率的单调性 (Monotonicity of Allocation Probability)**: 将式
    [\[eq:ic1_simple\]](#eq:ic1_simple){reference-type="eqref"
    reference="eq:ic1_simple"} 和
    [\[eq:ic2_simple\]](#eq:ic2_simple){reference-type="eqref"
    reference="eq:ic2_simple"} 相加，得到：
    $$P_1(1) - T_1(1) + 2P_1(2) - T_1(2) \ge P_1(2) - T_1(2) + 2P_1(1) - T_1(1)$$
    $$P_1(1) + 2P_1(2) \ge P_1(2) + 2P_1(1)$$ $$P_1(2) \ge P_1(1)$$
    这意味着，真实估价越高的竞标者，其（期中）获胜概率也应该越高（或至少不低）。这是一个普遍的结论。

2.  **支付的关系**: 从
    [\[eq:ic1_simple\]](#eq:ic1_simple){reference-type="eqref"
    reference="eq:ic1_simple"} 可得:
    $T_1(2) - T_1(1) \ge P_1(2) - P_1(1)$。 从
    [\[eq:ic2_simple\]](#eq:ic2_simple){reference-type="eqref"
    reference="eq:ic2_simple"} 可得:
    $2(P_1(2) - P_1(1)) \ge T_1(2) - T_1(1)$。 所以，
    $P_1(2) - P_1(1) \le T_1(2) - T_1(1) \le 2(P_1(2) - P_1(1))$。
    在机制设计中，通常假设某些IC约束是紧的（binding），即取等号。特别是高估价类型不愿谎报为低估价类型的约束
    $(IC'_{2 \to 1})$ 常常被假设为紧的，用以确定支付。 如果
    $(IC'_{2 \to 1})$ 取紧：
    $$P_1(2) \cdot 2 - T_1(2) = P_1(1) \cdot 2 - T_1(1)$$
    $$\Rightarrow T_1(2) - T_1(1) = 2(P_1(2) - P_1(1))$$
    这也符合笔记中紫色箭头所指的推导。

# 个体理性约束 (Individual Rationality - IR)

## 定义与目标

个体理性约束（也称参与约束）要求，每个竞标者在真实报告其类型并参与机制时，所获得的期望效用必须是非负的。否则，竞标者可以选择不参与机制，获得0效用。

## IR约束的设定

对于竞标者1，其IR约束为（假设其真实报告类型）： $$\begin{aligned}
P_1(1) \cdot 1 - T_1(1) &\ge 0 \quad &(IR_1) \label{eq:ir1} \\
P_1(2) \cdot 2 - T_1(2) &\ge 0 \quad &(IR_2) \label{eq:ir2}
\end{aligned}$$
通常，为了最大化卖方收益，\*\*最低估价类型的IR约束会取紧\*\*，即刚好等于0。这是因为卖方希望在不违反参与约束的前提下，尽可能多地向竞标者收取费用。如果最低估价类型的IR满足，且IC满足，则更高估价类型的IR通常也会满足。
因此，我们假设 $(IR_1)$ 取紧：
$$P_1(1) \cdot 1 - T_1(1) = 0 \implies T_1(1) = P_1(1)$$

## 支付规则的确定 (结合IC和IR)

我们已经有：

1.  $T_1(1) = P_1(1)$ (来自紧的 $IR_1$)

2.  $T_1(2) - T_1(1) = 2(P_1(2) - P_1(1))$ (来自紧的 $IC'_{2 \to 1}$)

将 (1) 代入 (2)，得到竞标者1报告类型2时的期中支付：
$$T_1(2) = T_1(1) + 2(P_1(2) - P_1(1)) = P_1(1) + 2P_1(2) - 2P_1(1)$$
$$T_1(2) = 2P_1(2) - P_1(1)$$ 这与笔记中对 $T_1(2)$ 的推导
$(P_1(2)-P_1(1))\cdot 2 + P_1(1)$ 结果一致。

# 卖方期望收益最大化

## 卖方期望收益函数

卖方的总期望收益 $R$
是从所有竞标者处获得的期望支付之和。由于对称性，对竞标者2也存在类似的支付规则:
$T_2(1) = P_2(1)$ 和 $T_2(2) = 2P_2(2) - P_2(1)$。
竞标者1对卖方收益的期望贡献为 $E[T_1]$ (期望是对 $v_1$ 的类型取的)：
$$\begin{aligned}
E[T_1] &= P(v_1=1)T_1(1) + P(v_1=2)T_1(2) \\
&= \frac{1}{3} T_1(1) + \frac{2}{3} T_1(2) \\
&= \frac{1}{3} P_1(1) + \frac{2}{3} (2P_1(2) - P_1(1)) \\
&= \frac{1}{3} P_1(1) + \frac{4}{3} P_1(2) - \frac{2}{3} P_1(1) \\
&= \frac{4}{3} P_1(2) - \frac{1}{3} P_1(1)
\end{aligned}$$ 卖方的总期望收益为 $R = E[T_1] + E[T_2]$：
$$R = \left(\frac{4}{3} P_1(2) - \frac{1}{3} P_1(1)\right) + \left(\frac{4}{3} P_2(2) - \frac{1}{3} P_2(1)\right)$$

## 收益函数的展开与重组

现在，我们将期中获胜概率 $P_i(\cdot)$ 用基于报告类型组合
$(\tilde{v}_1, \tilde{v}_2)$ 的分配规则 $P_i(\tilde{v}_1, \tilde{v}_2)$
展开。 回忆： $P_1(1) = \frac{1}{3}P_1(1,1) + \frac{2}{3}P_1(1,2)$
$P_1(2) = \frac{1}{3}P_1(2,1) + \frac{2}{3}P_1(2,2)$
$P_2(1) = \frac{1}{3}P_2(1,1) + \frac{2}{3}P_2(2,1)$
(竞标者2报告1，对竞标者1的类型取期望)
$P_2(2) = \frac{1}{3}P_2(1,2) + \frac{2}{3}P_2(2,2)$
(竞标者2报告2，对竞标者1的类型取期望)

代入 $R$ 的表达式： $$\begin{aligned}
R = & \frac{4}{3} \left(\frac{1}{3}P_1(2,1) + \frac{2}{3}P_1(2,2)\right) - \frac{1}{3} \left(\frac{1}{3}P_1(1,1) + \frac{2}{3}P_1(1,2)\right) \\
& + \frac{4}{3} \left(\frac{1}{3}P_2(1,2) + \frac{2}{3}P_2(2,2)\right) - \frac{1}{3} \left(\frac{1}{3}P_2(1,1) + \frac{2}{3}P_2(2,1)\right)
\end{aligned}$$ 整理各项： $$\begin{aligned}
R = & \frac{4}{9}P_1(2,1) + \frac{8}{9}P_1(2,2) - \frac{1}{9}P_1(1,1) - \frac{2}{9}P_1(1,2) \\
& + \frac{4}{9}P_2(1,2) + \frac{8}{9}P_2(2,2) - \frac{1}{9}P_2(1,1) - \frac{2}{9}P_2(2,1)
\end{aligned}$$ 按照报告的类型组合 $(\tilde{v}_1, \tilde{v}_2)$
对各项进行重新组合，这与笔记中的方式一致：

-   类型组合 $(\tilde{v}_1, \tilde{v}_2) = (2,2)$: 来自 $P_1(2,2)$ 和
    $P_2(2,2)$ 的贡献是
    $\frac{8}{9}P_1(2,2) + \frac{8}{9}P_2(2,2) = \frac{8}{9}(P_1(2,2)+P_2(2,2))$

-   类型组合 $(\tilde{v}_1, \tilde{v}_2) = (2,1)$: 来自 $P_1(2,1)$ 和
    $P_2(2,1)$ 的贡献是 $\frac{4}{9}P_1(2,1) - \frac{2}{9}P_2(2,1)$

-   类型组合 $(\tilde{v}_1, \tilde{v}_2) = (1,2)$: 来自 $P_1(1,2)$ 和
    $P_2(1,2)$ 的贡献是 $-\frac{2}{9}P_1(1,2) + \frac{4}{9}P_2(1,2)$

-   类型组合 $(\tilde{v}_1, \tilde{v}_2) = (1,1)$: 来自 $P_1(1,1)$ 和
    $P_2(1,1)$ 的贡献是
    $-\frac{1}{9}P_1(1,1) - \frac{1}{9}P_2(1,1) = -\frac{1}{9}(P_1(1,1)+P_2(1,1))$

所以，总期望收益可以写为： $$\begin{aligned}
R = & \frac{8}{9}(P_1(2,2)+P_2(2,2)) \\
& + \left(\frac{4}{9}P_1(2,1) - \frac{2}{9}P_2(2,1)\right) \\
& + \left(-\frac{2}{9}P_1(1,2) + \frac{4}{9}P_2(1,2)\right) \\
& - \frac{1}{9}(P_1(1,1)+P_2(1,1))
\end{aligned}$$ 这个表达式中的系数（如
$8/9, 4/9, -2/9, -1/9$）可以看作是与每种类型组合下分配物品的"虚拟估价"或"影子价格"相关的权重。

## 最优分配规则的确定

为了最大化期望收益 $R$，我们需要选择分配概率
$P_i(\tilde{v}_1, \tilde{v}_2)$。这些概率必须满足
$0 \le P_i(\tilde{v}_1, \tilde{v}_2) \le 1$ 以及
$P_1(\tilde{v}_1, \tilde{v}_2) + P_2(\tilde{v}_1, \tilde{v}_2) \le 1$。
观察 $R$ 的表达式中各项的系数：

1.  **当报告为 $(\tilde{v}_1, \tilde{v}_2) = (2,2)$ 时**: 项为
    $\frac{8}{9}(P_1(2,2)+P_2(2,2))$。由于系数
    $\frac{8}{9} > 0$，为最大化此项，应使 $P_1(2,2)+P_2(2,2)$ 最大，即
    $P_1(2,2)+P_2(2,2)=1$。这意味着当两个竞标者都报告高估价时，物品应该被分配出去。

2.  **当报告为 $(\tilde{v}_1, \tilde{v}_2) = (2,1)$ 时**: 项为
    $\frac{4}{9}P_1(2,1) - \frac{2}{9}P_2(2,1)$。为最大化此项，应使
    $P_1(2,1)=1$ 且
    $P_2(2,1)=0$。这意味着当竞标者1报告高估价、竞标者2报告低估价时，物品应该分配给竞标者1。

3.  **当报告为 $(\tilde{v}_1, \tilde{v}_2) = (1,2)$ 时**: 项为
    $-\frac{2}{9}P_1(1,2) + \frac{4}{9}P_2(1,2)$。为最大化此项，应使
    $P_1(1,2)=0$ 且
    $P_2(1,2)=1$。这意味着当竞标者1报告低估价、竞标者2报告高估价时，物品应该分配给竞标者2。

4.  **当报告为 $(\tilde{v}_1, \tilde{v}_2) = (1,1)$ 时**: 项为
    $-\frac{1}{9}(P_1(1,1)+P_2(1,1))$。由于系数
    $-\frac{1}{9} < 0$，为最大化此项（即最小化损失），应使
    $P_1(1,1)+P_2(1,1)$ 最小，即
    $P_1(1,1)+P_2(1,1)=0$。这意味着当两个竞标者都报告低估价时，物品不应被分配出去（卖方保留）。

## 最优机制下的结果

根据上述最优分配规则：

-   $P_1(1,1)=0, P_2(1,1)=0$

-   $P_1(1,2)=0, P_2(1,2)=1$

-   $P_1(2,1)=1, P_2(2,1)=0$

-   $P_1(2,2)+P_2(2,2)=1$。为确定起见，可以设定多种分配方式，例如将物品确定地分配给竞标者1（$P_1(2,2)=1, P_2(2,2)=0$），或分配给竞标者2，或以某种概率分配。总收益中只关心其和。

现在计算在此最优分配规则下，竞标者1的期中获胜概率和期中支付：

-   $P_1(1) = \frac{1}{3}P_1(1,1) + \frac{2}{3}P_1(1,2) = \frac{1}{3}(0) + \frac{2}{3}(0) = 0$。

-   根据 $T_1(1) = P_1(1)$, 可得 $T_1(1) = 0$。

-   $P_1(2) = \frac{1}{3}P_1(2,1) + \frac{2}{3}P_1(2,2)$。 如果采用
    $P_1(2,2)=1, P_2(2,2)=0$
    的分配方式（当两人都报高价时，竞标者1获得物品），则：
    $P_1(2) = \frac{1}{3}(1) + \frac{2}{3}(1) = 1$。

-   根据 $T_1(2) = 2P_1(2) - P_1(1)$, 可得 $T_1(2) = 2(1) - 0 = 2$。

笔记中最后的 \"$T_1(2) = 2(\frac{1}{3}P_1(2,1) + \frac{2}{3}P_1(2,2))$\"
实际上就是将 $P_1(2)$ 的定义代入 $T_1(2)=2P_1(2)$ (因为 $P_1(1)=0$)。

如果当 $(\tilde{v}_1, \tilde{v}_2) = (2,2)$ 时，物品以各 $1/2$
的概率分配给竞标者1和2，即 $P_1(2,2)=1/2, P_2(2,2)=1/2$，那么：
$P_1(2) = \frac{1}{3}P_1(2,1) + \frac{2}{3}P_1(2,2) = \frac{1}{3}(1) + \frac{2}{3}(\frac{1}{2}) = \frac{1}{3} + \frac{1}{3} = \frac{2}{3}$。
$T_1(2) = 2P_1(2) - P_1(1) = 2(\frac{2}{3}) - 0 = \frac{4}{3}$。
对称地，$P_2(2) = \frac{2}{3}$，$T_2(2) = \frac{4}{3}$。
这种情况下，卖方在 $(\tilde{v}_1, \tilde{v}_2) = (2,2)$ 时收到的总支付为
$T_1(2,2)+T_2(2,2)$。而期中支付 $T_1(2)$ 是针对所有 $v_2$ 的平均。

# 默森 (Myerson) 拍卖设计理论

本文档详细解释了罗杰·迈尔森 (Roger Myerson)
关于最优拍卖设计的理论。核心目标是设计一个拍卖机制，使得卖方的期望收益最大化。理论的关键在于引入"虚拟估值"(Virtual
Valuation) 的概念，并通过显示原理 (Revelation Principle)
将问题简化为设计一个激励相容的直接机制。

## 拍卖设定 (Auction design by Myerson)

-   **竞标者集合 (Set of bidders):** $N = \{1, 2, \dots, n\}$，代表有
    $n$ 个竞标者。

-   **估值/类型 (Types):** 每个竞标者 $i$ 对拍卖品有一个私人估值 $t_i$
    (也称作其类型)。该估值从区间 $[a_i, b_i]$ 中独立抽取，其概率密度函数
    (PDF) 为 $f_i: [a_i, b_i] \to \mathbb{R}^+$。我们用 $F_i(t_i)$
    表示其累积分布函数 (CDF)。

-   $t = (t_1, \dots, t_n)$ 是所有竞标者类型组成的向量。

-   $t_{-i} = (t_1, \dots, t_{i-1}, t_{i+1}, \dots, t_n)$ 表示除竞标者
    $i$ 以外其他所有竞标者的类型向量。

-   所有可能的类型组合的空间为
    $T = \underset{i=1}{\overset{n}{\times}} [a_i, b_i]$。

-   由于独立性，类型向量 $t$ 的联合概率密度函数为
    $f(t) = \prod_{j=1}^n f_j(t_j)$。

-   除 $i$ 以外其他人类型向量的联合概率密度函数为
    $f_{-i}(t_{-i}) = \prod_{j \neq i} f_j(t_j)$。

## 拍卖机制 (Auction Mechanism)

一个拍卖机制由一对函数 $(p, x)$ 定义：

-   $p = (p_1(t), \dots, p_n(t))$：其中 $p_i(t)$
    表示当所有竞标者的类型组合为 $t$ 时，竞标者 $i$
    赢得拍卖品的概率。必须满足
    $\sum_{i=1}^n p_i(t) \le 1$（物品最多被一个竞标者赢得，或者不被任何人赢得）。

-   $x = (x_1(t), \dots, x_n(t))$：其中 $x_i(t)$
    表示当所有竞标者的类型组合为 $t$ 时，竞标者 $i$ 需要支付的金额。

## 显示原理 (Revelation Principle)

显示原理是拍卖理论中的一个基石。它指出：对于任何（可能是间接的、复杂的）可行拍卖机制，都存在一个等价的、可行的**直接机制
(direct mechanism)**，在该直接机制中：

1.  竞标者被要求直接向拍卖方汇报他们的真实类型。

2.  如实汇报其真实类型是每个竞标者的最优策略（即该机制是激励相容的，Incentive
    Compatible）。

3.  这个直接机制能给卖方和所有竞标者带来与原机制相同的期望效用。

因此，在设计最优拍卖时，我们无需考虑所有复杂的间接机制，只需在所有激励相容的直接机制中寻找最优者。

## 竞标者 $i$ 的效用 (Utility for bidder $i$)

如果竞标者 $i$ 的真实类型是
$t_i$，在直接机制中，他汇报类型（我们关注他如实汇报的情况），那么他的期望效用
$U_i(p, x, t_i)$ 是：
$$U_i(p, x, t_i) = \int_{T_{-i}} (V_i(t) p_i(t) - x_i(t)) f_{-i}(t_{-i}) dt_{-i}$$
其中 $V_i(t)$ 是竞标者 $i$ 在类型向量为 $t$ 时对物品的估值。

-   笔记中首先提到了一种可能带有外部性的估值形式：$V_i(t) = t_i + \sum_{j \neq i} e_j(t_j)$，这意味着
    $i$ 的估值不仅取决于自己的类型 $t_i$，还受到其他人类型 $t_j$
    的影响（$e_j(t_j)$ 是外部性项）。

-   然而，一个重要的修正或常见假设是**私人估值 (private
    value)**模型：$V_i(t) = t_i$。这意味着物品对竞标者 $i$
    的价值仅由其自身类型 $t_i$ 决定。在后续推导中，我们主要采用此设定。

## 卖方效用 (Utility for seller)

卖方的期望效用 $U_0(p, x)$（通常是期望收益）是：
$$U_0(p, x) = \int_T \left( V_0(t)\left(1 - \sum_{k=1}^n p_k(t)\right) + \sum_{k=1}^n x_k(t) \right) f(t) dt$$
这里：

-   $V_0(t)$
    是物品在未被卖出时，卖方对物品的估值（保留估值）。笔记中提及
    $V_0(t) = s_0 + \sum_{j=1}^n e_j(t_j)$，其中 $s_0$
    是卖方的基础保留估值。

-   第一项 $V_0(t) (1 - \sum_{k=1}^n p_k(t))$ 表示物品未卖出时（其概率为
    $1 - \sum_{k=1}^n p_k(t)$），卖方保留物品获得的期望估值。

-   第二项 $\sum_{k=1}^n x_k(t)$
    是卖方从所有竞标者那里收到的期望总支付。

为了最大化卖方收益，通常假设卖方试图最大化 $U_0(p, x)$。

## 激励相容约束 (IC - Incentive Compatibility)

在直接机制中，激励相容意味着每个竞标者如实汇报其类型 $t_i$
是其最优策略。也就是说，汇报 $t_i$
所得的期望效用，必须大于或等于谎报为任何其他类型 $s_i$
所得到的期望效用。 对于私人估值 $V_i(t)=t_i$，当真实类型为 $t_i$
时，若谎报为 $s_i$，其期望效用为
$\int_{T_{-i}} (t_i p_i(s_i, t_{-i}) - x_i(s_i, t_{-i})) f_{-i}(t_{-i}) dt_{-i}$。
则IC约束为：
$$U_i(p, x, t_i) \ge \int_{T_{-i}} (t_i p_i(s_i, t_{-i}) - x_i(s_i, t_{-i})) f_{-i}(t_{-i}) dt_{-i} \quad \forall s_i \in [a_i, b_i]$$
定义竞标者 $i$ 汇报类型 $s_i$ 时的**期望获胜概率** (interim expected
probability of winning) 为：
$$Q_i(p, s_i) = \int_{T_{-i}} p_i(s_i, t_{-i}) f_{-i}(t_{-i}) dt_{-i}$$
通过一系列推导（基于效用函数的包络定理），可以从IC约束得到：
$$\label{eq:envelope}
\frac{dU_i(p, x, t_i)}{dt_i} = Q_i(p, t_i)$$
这个公式表明：竞标者期望效用对其类型的边际变化率，等于其在该类型下的期望获胜概率。
对 [\[eq:envelope\]](#eq:envelope){reference-type="eqref"
reference="eq:envelope"} 式从类型的下限 $a_i$ 积分到 $t_i$：
$$U_i(p, x, t_i) - U_i(p, x, a_i) = \int_{a_i}^{t_i} Q_i(p, s_i) ds_i$$
因此，竞标者的期望效用可以表示为：
$$U_i(p, x, t_i) = U_i(p, x, a_i) + \int_{a_i}^{t_i} Q_i(p, s_i) ds_i$$
$U_i(p, x, a_i)$ 是类型为最低可能值 $a_i$ 的竞标者的期望效用。个体理性
(Individual Rationality, IR) 约束要求 $U_i(p, x, t_i) \ge 0$ 对所有
$t_i$ 成立。由于 $Q_i(p, s_i) \ge 0$（获胜概率非负），$U_i(p, x, t_i)$
是关于 $t_i$ 非减的。因此，要满足所有类型的IR约束，只需满足最低类型
$a_i$ 的IR约束，即 $U_i(p, x, a_i) \ge 0$。为了最大化卖方收益，通常将
$U_i(p, x, a_i)$ 设定为0。

## 卖方期望收益 $R$ 的改写

卖方的期望收益
$R = U_0(p, x)$。为简化讨论，我们先假设卖方对物品的保留估值 $V_0(t) = 0$
(即不保留物品则价值为0)，此时卖方收益完全来自竞标者的支付：
$$R = \sum_{i=1}^n \int_T x_i(t) f(t) dt = \sum_{i=1}^n \int_{a_i}^{b_i} \left( \int_{T_{-i}} x_i(t_i, t_{-i}) f_{-i}(t_{-i}) dt_{-i} \right) f_i(t_i) dt_i$$
从竞标者效用定义
$U_i(p, x, t_i) = \int_{T_{-i}} (t_i p_i(t) - x_i(t)) f_{-i}(t_{-i}) dt_{-i}$，我们可以得到竞标者
$i$ 的期望支付：
$$\int_{T_{-i}} x_i(t) f_{-i}(t_{-i}) dt_{-i} = t_i Q_i(p, t_i) - U_i(p, x, t_i)$$
令 $A_i$ 代表竞标者 $i$ 的总期望支付对卖方收益的贡献： $$\begin{aligned}
A_i &= \int_{a_i}^{b_i} \left( t_i Q_i(p, t_i) - U_i(p, x, t_i) \right) f_i(t_i) dt_i \\
&= \int_{a_i}^{b_i} \left( t_i Q_i(p, t_i) - \left( U_i(p, x, a_i) + \int_{a_i}^{t_i} Q_i(p, s_i) ds_i \right) \right) f_i(t_i) dt_i \\
&= \int_{a_i}^{b_i} t_i Q_i(p, t_i) f_i(t_i) dt_i - U_i(p, x, a_i)\int_{a_i}^{b_i}f_i(t_i)dt_i - \int_{a_i}^{b_i} \left( \int_{a_i}^{t_i} Q_i(p, s_i) ds_i \right) f_i(t_i) dt_i
\end{aligned}$$ 注意到
$\int_{a_i}^{b_i}f_i(t_i)dt_i = 1$。对于最后一项，可以使用分部积分法或以下常用的积分恒等式（通过改变积分次序得到）：
$$\int_{a_i}^{b_i} \left( \int_{a_i}^{t_i} Q_i(p, s_i) ds_i \right) f_i(t_i) dt_i = \int_{a_i}^{b_i} Q_i(p, s_i) (1 - F_i(s_i)) ds_i$$
将此代回 $A_i$ 的表达式： $$\begin{aligned}
A_i &= \int_{a_i}^{b_i} t_i Q_i(p, t_i) f_i(t_i) dt_i - \int_{a_i}^{b_i} Q_i(p, t_i) (1 - F_i(t_i)) dt_i - U_i(p, x, a_i) \\
&= \int_{a_i}^{b_i} Q_i(p, t_i) \left( t_i f_i(t_i) - (1 - F_i(t_i)) \right) dt_i - U_i(p, x, a_i) \\
&= \int_{a_i}^{b_i} Q_i(p, t_i) \left( t_i - \frac{1 - F_i(t_i)}{f_i(t_i)} \right) f_i(t_i) dt_i - U_i(p, x, a_i)
\end{aligned}$$ 将
$Q_i(p, t_i) = \int_{T_{-i}} p_i(t_i, t_{-i}) f_{-i}(t_{-i}) dt_{-i}$
代回，并将 $f_i(t_i)f_{-i}(t_{-i})=f(t)$ 合并：
$$A_i = \int_{T} p_i(t) \left( t_i - \frac{1 - F_i(t_i)}{f_i(t_i)} \right) f(t) dt - U_i(p, x, a_i)$$

## 虚拟估值 (Virtual Valuation)

我们定义竞标者 $i$ 的**虚拟估值函数** (或者称为虚拟类型) $\phi_i(t_i)$
为： $$\phi_i(t_i) = t_i - \frac{1 - F_i(t_i)}{f_i(t_i)}$$
这个函数是迈尔森理论的核心。$\frac{1 - F_i(t_i)}{f_i(t_i)}$ 是逆风险率
(inverse hazard rate)。 那么 $A_i$ 可以写成：
$$A_i = \int_{T} p_i(t) \phi_i(t_i) f(t) dt - U_i(p, x, a_i)$$
卖方的总期望收益（假设 $U_i(p, x, a_i) = 0$ 对所有 $i$
成立，并且考虑卖方保留物品的估值 $V_0(t)$）为： $$\begin{aligned}
R &= \sum_{i=1}^n A_i + \int_T V_0(t)\left(1-\sum_{k=1}^n p_k(t)\right)f(t)dt \\
&= \sum_{i=1}^n \int_{T} p_i(t) \phi_i(t_i) f(t) dt + \int_T V_0(t)f(t)dt - \int_T V_0(t)\sum_{k=1}^n p_k(t)f(t)dt \\
&= \int_T \left( \sum_{k=1}^n p_k(t) (\phi_k(t_k) - V_0(t)) + V_0(t) \right) f(t) dt
\end{aligned}$$

## 最优拍卖规则 (Optimal Auction)

为了最大化卖方期望收益 $R$，我们需要逐点（即对于每一个可能的类型组合
$t$）选择分配概率 $p_k(t)$ 来最大化被积函数
$\sum_{k=1}^n p_k(t) (\phi_k(t_k) - V_0(t))$。 最优的分配规则如下：

1.  对每个竞标者 $k$，计算其有效虚拟估值 $\phi_k(t_k) - V_0(t)$。

2.  将物品分配给使得这个有效虚拟估值最大的竞标者 $i^*$ (即
    $p_{i^*}^*(t)=1$)，前提条件是这个最大值必须为非负，即
    $\phi_{i^*} (t_{i^*}) - V_0(t) \ge 0$。

3.  如果所有竞标者的 $\phi_k(t_k) - V_0(t)$ 都小于0，则物品不卖出 (即
    $p_k^*(t)=0$ 对所有 $k$)，卖方保留物品。

简单来说，若定义卖方的虚拟估值为
$\phi_0(t) = V_0(t)$（在笔记中，这可能对应 $e_i(t_i)$ 或一个保留价
$r_0$），则最优规则是： 找出
$i^* = \text{argmax}_{i \in N \cup \{0\}} \{ \phi_i(t_i) \}$ (这里
$\phi_0(t_0)$ 代表卖方的虚拟估值，例如一个固定的 $r_0$ 或者更复杂的
$V_0(t)$)。如果 $i^* \in N$
(即某个竞标者的虚拟估值最高且不低于卖方的)，则物品分配给 $i^*$。如果
$i^*=0$ (卖方自己的虚拟估值最高)，则物品不卖出。 笔记中的分配规则
$i^* = \text{argmax}_i \{ t_i - e_i(t_i) - \frac{1 - F_i(t_i)}{f_i(t_i)} \}$，然后要求这个最大值非负。这等价于将
$e_i(t_i)$ 视为与卖方保留估值相关的一个项。

通常要求虚拟估值函数 $\phi_i(t_i)$ 是关于 $t_i$ 严格递增的，即
$\phi_i'(t_i) > 0$。这个条件被称为**正则性条件 (regularity
condition)**。如果分布不是正则的（例如，$\phi_i(t_i)$
可能有下降的部分），则需要进行所谓的"熨平
(ironing)"处理，这使得分析更为复杂。

## 例子和收益等价定理

### 例子：均匀分布 (Uniform Distribution)

假设竞标者 $i$ 的类型 $t_i$ 服从 $[0,1]$ 上的均匀分布
($t_i \sim U[0,1]$)。 则：

-   $F_i(t_i) = t_i$ (CDF)

-   $f_i(t_i) = 1$ (PDF)

其虚拟估值为：
$$\phi_i(t_i) = t_i - \frac{1 - t_i}{1} = t_i - 1 + t_i = 2t_i - 1$$

### 例子：独立同分布私人估值 (i.i.d. Private Values)

如果所有竞标者的估值都是从同一个分布 $F(\cdot)$ (密度为 $f(\cdot)$)
中独立抽取的，并且满足正则性条件 ($\phi'(t) > 0$)。
此时，最优拍卖将物品分配给虚拟估值 $\phi(t_i)$
最高的竞标者，前提是其虚拟估值不低于卖方的虚拟保留估值 (例如0，或 $r_0$
使得 $\phi(r_0)=0$)。
在这种对称i.i.d.正则环境下，常见的具体最优拍卖形式包括：

-   **带有保留价 $r^*$ 的第一价格密封拍卖 (First-price sealed-bid
    auction with reserve price $r^*$)**。

-   **带有保留价 $r^*$ 的第二价格密封拍卖 (Second-price sealed-bid
    auction with reserve price $r^*$)**。

这里的保留价 $r^*$ 通常设定为使得 $\phi(r^*) = \phi_0$
(卖方的虚拟估值，若卖方保留物品价值为0，则 $\phi(r^*)=0$)。

### 收益等价定理 (Revenue Equivalence Theorem)

该定理指出：在某些条件下，不同的拍卖机制可以产生相同的卖方期望收益。标准条件如下：
假设竞标者是风险中性的，他们的私人估值是独立抽取的（可以来自不同的分布）。那么任何满足以下条件的拍卖机制，其卖方期望收益都相同：

1.  **相同的分配结果：**
    对于任何类型组合，具有合格最高估值的竞标者赢得物品（即，物品总是分配给某个特定规则选出的赢家，例如，在对称情况下，估值最高者赢得，只要其估值超过某个保留价）。

2.  **最低类型的期望效用相同：** 所有竞标者中，类型为最低可能值 ($a_i$)
    的个体，其期望效用为零 (或者某个相同的常数)。

笔记中的表述为：如果所有竞标者的 $U_i(p,x,a_i)$
相同，并且对于所有类型组合 $t$，分配概率 $P_i(t)$
都相同，那么这些机制会产生相同的期望收益 $R$。

### 例子：非对称竞标者 (Asymmetric Bidders)

考虑两个竞标者 ($n=2$)，具有私人估值：

-   竞标者1:
    $t_1 \sim U[0,1] \implies F_1(t_1) = t_1, f_1(t_1) = 1 \implies \phi_1(t_1) = 2t_1 - 1$.

-   竞标者2:
    $t_2 \sim U[0,2] \implies F_2(t_2) = t_2/2, f_2(t_2) = 1/2 \implies \phi_2(t_2) = t_2 - \frac{1 - t_2/2}{1/2} = t_2 - (2 - t_2) = 2t_2 - 2$.

假设一个具体的类型实现：$t_1 = 1, t_2 = 1.1$。 计算他们的虚拟估值：

-   $\phi_1(1) = 2(1) - 1 = 1$.

-   $\phi_2(1.1) = 2(1.1) - 2 = 2.2 - 2 = 0.2$.

根据最优拍卖规则（分配给虚拟估值最高者，假设卖方保留估值为0，且两个虚拟估值都非负），由于
$\phi_1(1) = 1 > \phi_2(1.1) = 0.2$，竞标者1赢得物品。
然而，我们注意到竞标者2的实际估值 $t_2 = 1.1$ 高于竞标者1的实际估值
$t_1 = 1$。这意味着，在这个非对称竞标者的例子中，最优拍卖（旨在最大化卖方收益的拍卖）并**不一定是有效率的**
(allocatively efficient)。效率通常指将物品分配给对其估值最高的竞标者。
这也说明，标准的第二价格拍卖（总是将物品给予估值最高者）在这种非对称情况下，**不是最优的**
(not optimal for revenue
maximization)，因为它不一定能最大化卖方收益。为了达到收益最大化，需要根据虚拟估值来设计分配规则和支付规则。

# 动态非完全信息博弈 (Dynamic Incomplete Information Game)

动态非完全信息博弈是博弈论中的一个重要分支，它研究在信息不对称且行动有先后顺序的情况下，参与者的策略选择问题。

-   **动态 (Dynamic):**
    参与者按一定的顺序行动，后行动者在行动时可能已经观察到先行动者的部分或全部行动。

-   **非完全信息 (Incomplete Information):**
    至少有一位参与者不完全了解博弈的某些关键特征，最常见的是不清楚其他参与者的"类型"(Type)。类型可以指参与者的偏好、成本结构、拥有的资源或私人信息等。

## 图示博弈示例：简化的求婚博弈

笔记中的图示为一个典型的动态非完全信息博弈，可以理解为一个简化的求婚博弈场景：

1.  **自然 (N, Nature):** 首先决定参与人1（求婚者）的类型。

    -   以概率 $p$ 成为 R 型 (Rich, 富有)。

    -   以概率 $1-p$ 成为 P 型 (Poor, 贫穷)。

2.  **参与人1 (求婚者，信号发送方):**

    -   知道自己的真实类型（R 或 P），此为私人信息。

    -   根据自己的类型选择一个行动：送 E (Expensive gift, 贵重礼物) 或 C
        (Cheap gift, 便宜礼物)。

3.  **参与人2 (被求婚者，信号接收方):**

    -   观察到参与人1选择的礼物 (E 或
        C)，但*不能直接观察到*参与人1的真实类型 (R 或 P)。

    -   在观察到礼物后，参与人2会对其类型形成一个**信念
        (Belief)**。例如，观察到贵重礼物
        E，可能会使得参与人2认为求婚者是 R 型的概率增加。

    -   根据观察到的礼物和形成的信念，选择一个行动：M (Marry, 结婚) 或 N
        (Not Marry, 不结婚)。

在这个博弈中，核心的信息不对称在于：参与人1知道自己的类型，而参与人2不知道，只能通过参与人1的行动（送礼）来推断其类型。参与人2的决策节点（例如，观察到E后决定是否结婚）构成一个**信息集
(Information
Set)**，因为她不确定这个E是由R型还是P型发出的（除非某种类型从不选择E）。

## 精炼贝叶斯均衡 (Perfect Bayesian Equilibrium - PBE)

精炼贝叶斯均衡是分析动态非完全信息博弈的主要解概念。它由参与者的策略组合和信念系统构成，并且这些策略和信念需要满足一定的理性要求。

PBE 要求满足以下两个核心条件：

1.  **信念一致性 (Belief Consistency):**
    在均衡路径上，当一个参与者处于某个信息集时，他对该信息集内不同节点的信念（即到达各个节点的概率）必须通过贝叶斯法则，并结合其他参与者的均衡策略以及类型的先验概率分布来计算得出。对于**非均衡路径
    (Out-of-Equilibrium
    Path)**上的信息集（即在均衡中不会被到达的信息集），贝叶斯法则可能无法直接应用，PBE对此处的信念约束较弱，但通常要求信念是"合理的"。

2.  **序贯理性 (Sequential Rationality):**
    在给定信念和其他参与者策略的情况下，每一位参与者在博弈的每一个可能的信息集上，其选择的行动都必须是最大化其自身期望效用的最优选择（从该信息集开始直至博弈结束）。

    -   **发送方理性:**
        给定接收方的预期反应策略，发送方的每个类型都选择能最大化自身期望效用的行动。

    -   **接收方理性:**
        给定观察到的行动以及据此形成的信念，接收方选择能最大化自身期望效用的行动。

根据发送方在均衡中行为模式的不同，PBE可以分为：

-   **分离均衡 (Separating Equilibrium):**
    不同类型的发送方选择不同的行动，使得接收方可以通过观察行动完美地推断出发送方的类型。

-   **混同均衡 (Pooling Equilibrium):**
    所有类型的发送方都选择相同的行动，因此接收方在观察到该行动后无法通过行动本身更新关于发送方类型的先验信念。

-   **半分离/部分混同均衡 (Semi-Separating/Semi-Pooling Equilibrium):**
    某些类型的发送方选择相同的行动，而另一些类型选择不同的行动；或者某一类型的发送方以一定的概率混合其行动选择。

# 教育信号传递模型 (Signaling by Education)

这是Michael Spence (1973)
提出的经典模型，用于解释教育如何作为一种信号机制在劳动力市场中发挥作用。即使教育本身不直接提高生产力，它也可以帮助企业区分高生产力工人和低生产力工人。

## 模型设定

-   **参与者:**

    -   **工人 (Workers, 信号发送方):** 拥有关于自身生产力的私人信息。

    -   **企业 (Firms, 信号接收方):** 无法直接观察到工人的生产力。

-   **工人的生产力类型 ($\theta$):**

    -   高生产力 ($\theta_H$): 出现概率为 $\lambda$。

    -   低生产力 ($\theta_L$): 出现概率为 $1-\lambda$。

    -   假设 $\theta_H > \theta_L$。

-   **工人的行动:** 选择教育水平 $e \ge 0$。

-   **企业的行动:** 观察到工人的教育水平 $e$
    后，形成对工人类型的信念，并提供工资
    $w(e)$。在完全竞争的市场中，企业会支付等于工人预期生产力的工资。

-   **教育成本 ($C(e, \theta)$):** 工人获得教育水平 $e$
    所需的成本，该成本也取决于工人的类型 $\theta$。 关键的成本函数假设：

    -   $C(0, \theta) = 0$: 不受教育则成本为零。

    -   $C_e(e, \theta) = \frac{\partial C(e, \theta)}{\partial e} > 0$:
        教育的边际成本为正，即获得更高教育水平需要付出更多成本。

    -   $C_{ee}(e, \theta) = \frac{\partial^2 C(e, \theta)}{\partial e^2} > 0$:
        教育的边际成本递增（可选假设，但图中曲线常如此表示）。

    -   $C_\theta(e, \theta) = \frac{\partial C(e, \theta)}{\partial \theta} < 0$:
        对于相同的教育水平 $e$，高生产力工人 ($\theta_H$)
        付出的总成本更低（或至少不更高）。

    -   $C_{e\theta}(e, \theta) = \frac{\partial^2 C(e, \theta)}{\partial e \partial \theta} < 0$:
        这是**关键的单调信号条件 (Spence-Mirrlees Condition 或
        Single-Crossing
        Property)**。它意味着高生产力工人获得教育的*边际成本*更低。也就是说，$\theta_H$
        类型的人增加一个单位教育水平所付出的额外成本，要比 $\theta_L$
        类型的人少。这个性质是分离均衡能够存在的数学基础，因为它使得高生产力者通过选择较高的教育水平来"廉价地"将自己与低生产力者区分开来成为可能。

-   **工人的净效用:** 工资减去教育成本，即
    $U(w, e, \theta) = w - C(e, \theta)$。

## 博弈顺序 (Timing)

1.  自然选择工人的类型
    $\theta \in \{\theta_L, \theta_H\}$。工人知道自己的类型，企业不知道。

2.  工人选择教育水平 $e \ge 0$。

3.  企业观察到工人选择的教育水平 $e$，但不能直接观察到其类型
    $\theta$。企业根据 $e$ 更新对工人类型的信念 $\mu(\theta|e)$。

4.  企业向工人提供工资
    $w(e)$。在竞争性市场中，企业会支付等于工人预期生产力的工资：$w(e) = \mu(\theta_H|e)\theta_H + \mu(\theta_L|e)\theta_L$。

5.  工人获得净效用 $w(e) - C(e, \theta)$。

## 分离均衡 (Separating Equilibrium)

在分离均衡中，不同类型的工人选择不同的教育水平，从而使得企业能够通过观察到的教育水平完美地识别出工人的真实生产力类型。

### 定义与信念

假设存在一个分离均衡，其中：

-   高生产力工人选择教育水平 $e_H$: $e(\theta_H) = e_H$。

-   低生产力工人选择教育水平 $e_L$: $e(\theta_L) = e_L$。

-   且
    $e_H \neq e_L$。通常为了简化分析，假设低生产力工人选择最低的教育水平，即
    $e_L = 0$。

在这种情况下，企业的信念是：

-   如果观察到教育水平 $e_H$，企业相信该工人是高生产力类型
    ($\theta_H$)，因此支付工资 $w(e_H) = \theta_H$。

-   如果观察到教育水平 $e_L$，企业相信该工人是低生产力类型
    ($\theta_L$)，因此支付工资 $w(e_L) = \theta_L$。

-   **非均衡路径信念 (Out-of-Equilibrium Beliefs):**
    如果企业观察到一个既不是 $e_H$ 也不是 $e_L$ 的教育水平 $e'$ (即
    $e' \notin \{e_H, e_L\}$)，企业会如何判断？一个常见的支持分离均衡的信念是"悲观信念"：企业认为任何偏离均衡路径选择
    $e'$ 的工人都是低生产力类型 $\theta_L$，因此支付工资
    $w(e') = \theta_L$。

### 激励相容约束 (Incentive Compatibility Constraints - IC)

为了使上述策略和信念构成一个PBE，每种类型的工人选择其均衡教育水平所获得的净效用，必须不低于其选择其他任何教育水平（包括模仿另一种类型）所能获得的净效用。
假设 $e_L = 0$ 且 $C(0, \theta)=0$。

1.  **高生产力工人 $(\theta_H)$ 的激励相容约束 (IC-H):** $\theta_H$
    型工人选择 $e_H$ 的净效用，不应低于他选择 $e_L=0$ (从而被误认为
    $\theta_L$ 类型并获得工资 $\theta_L$) 的净效用。
    $$\theta_H - C(e_H, \theta_H) \ge \theta_L - C(0, \theta_H)$$ 由于
    $C(0, \theta_H)=0$，上式简化为：
    $$\theta_H - C(e_H, \theta_H) \ge \theta_L \implies C(e_H, \theta_H) \le \theta_H - \theta_L$$
    这意味着高生产力工人愿意为获得工资差额 $(\theta_H - \theta_L)$
    而支付的教育成本 $C(e_H, \theta_H)$ 不能超过这个差额。这条约束定义了
    $e_H$ 的一个上限（对应笔记图中分离均衡部分的 $e_2$）。

2.  **低生产力工人 $(\theta_L)$ 的激励相容约束 (IC-L):** $\theta_L$
    型工人选择 $e_L=0$ 的净效用，不应低于他模仿 $\theta_H$ 型工人选择
    $e_H$ (从而被误认为是 $\theta_H$ 类型并获得工资 $\theta_H$)
    的净效用。
    $$\theta_L - C(0, \theta_L) \ge \theta_H - C(e_H, \theta_L)$$ 由于
    $C(0, \theta_L)=0$，上式简化为：
    $$\theta_L \ge \theta_H - C(e_H, \theta_L) \implies C(e_H, \theta_L) \ge \theta_H - \theta_L$$
    这意味着低生产力工人模仿高生产力工人选择 $e_H$ 所需的成本
    $C(e_H, \theta_L)$ 必须足够高，使得他不值得去模仿以获取工资差额
    $(\theta_H - \theta_L)$。这条约束定义了 $e_H$
    的一个下限（对应笔记图中分离均衡部分的 $e^*$，有时也记为 $e_1$）。

因此，任何满足 $C(e_H, \theta_L) \ge \theta_H - \theta_L$ 且
$C(e_H, \theta_H) \le \theta_H - \theta_L$ 的教育水平 $e_H$（以及
$e_L=0$）都可以构成一个分离均衡。 由于 $C_{e\theta} < 0$（即
$C(e, \theta_L)$ 曲线比 $C(e, \theta_H)$
曲线更陡峭），总能找到满足这两个条件的 $e_H$ 区间。

### 成本最低的分离均衡 (Least-Cost Separating Equilibrium)

在所有可能的分离均衡中，对社会福利（或至少对高能力工人）而言最优的是成本最低的分离均衡。这发生在
$e_H$ 取其可能的最小值时，即刚好满足低能力者不愿模仿的条件：
$$e_H^* \text{ 使得 } C(e_H^*, \theta_L) = \theta_H - \theta_L$$
同时，这个 $e_H^*$
也必须满足高能力者的IC约束：$C(e_H^*, \theta_H) \le \theta_H - \theta_L$。由于
$C(e_H^*, \theta_H) < C(e_H^*, \theta_L)$ （因为 $\theta_H > \theta_L$
且 $C_\theta < 0$ 或者更直观地从 $C_{e\theta}<0$
导致两条成本曲线分离），这个条件通常是满足的。 笔记图中的 $e^*$
(对应分离均衡图中的 $e^*$) 就是这样一个点。

## 混同均衡 (Pooling Equilibrium)

在混同均衡中，所有类型的工人都选择相同的教育水平
$e^*$。因此，企业在观察到 $e^*$ 后，无法区分工人的真实类型。

### 定义与信念

假设存在一个混同均衡，其中：

-   所有类型的工人（$\theta_H$ 和 $\theta_L$）都选择相同的教育水平
    $e^*$: $e(\theta_H) = e(\theta_L) = e^*$。

在这种情况下，企业的信念是：

-   如果观察到教育水平 $e^*$：企业知道工人是 $\theta_H$ 类型的先验概率为
    $\lambda$，是 $\theta_L$ 类型的先验概率为
    $1-\lambda$。由于无法区分，企业支付的工资是工人的期望生产力：
    $$w(e^*) = \lambda\theta_H + (1-\lambda)\theta_L$$

-   **非均衡路径信念:** 如果企业观察到任何不同于 $e^*$ 的教育水平
    $e' \neq e^*$，一个常见的支持混同均衡的信念（同样是"悲观信念"）是：企业认为选择
    $e'$ 的工人是低生产力类型 $\theta_L$，因此支付工资
    $w(e') = \theta_L$。

### 激励相容约束 (IC)

为了使这种策略和信念构成PBE，每种类型的工人都必须觉得选择 $e^*$
并获得平均工资 $w(e^*)$，比偏离到其他教育水平（例如选择 $e=0$ 并被认为是
$\theta_L$ 类型）要好。我们考虑偏离到 $e=0$ 的情况，此时 $C(0,\theta)=0$
且获得的工资为 $\theta_L$（根据非均衡路径信念）。

1.  **高生产力工人 $(\theta_H)$ 的激励相容约束 (IC-H):** $\theta_H$
    型工人在混同均衡中选择 $e^*$ 的净效用，不应低于他偏离选择 $e=0$
    的净效用。
    $$\lambda\theta_H + (1-\lambda)\theta_L - C(e^*, \theta_H) \ge \theta_L - C(0, \theta_H)$$
    由于 $C(0, \theta_H)=0$，上式简化为：
    $$\lambda\theta_H + (1-\lambda)\theta_L - C(e^*, \theta_H) \ge \theta_L$$
    $$\implies \lambda(\theta_H - \theta_L) \ge C(e^*, \theta_H)$$
    这意味着高生产力工人在混同均衡中获得的相对于被单独识别为低生产力者的工资溢价
    $\lambda(\theta_H - \theta_L)$，必须足以补偿其为达到混同教育水平
    $e^*$ 所付出的成本 $C(e^*, \theta_H)$。这定义了 $e^*$
    的一个上限（对应笔记图中混同均衡部分的 $e_4$）。

2.  **低生产力工人 $(\theta_L)$ 的激励相容约束 (IC-L):** $\theta_L$
    型工人在混同均衡中选择 $e^*$ 的净效用，不应低于他偏离选择 $e=0$
    的净效用。
    $$\lambda\theta_H + (1-\lambda)\theta_L - C(e^*, \theta_L) \ge \theta_L - C(0, \theta_L)$$
    由于 $C(0, \theta_L)=0$，上式简化为：
    $$\lambda\theta_H + (1-\lambda)\theta_L - C(e^*, \theta_L) \ge \theta_L$$
    $$\implies \lambda(\theta_H - \theta_L) \ge C(e^*, \theta_L)$$
    这意味着低生产力工人在混同均衡中获得的相对于其基础工资 $\theta_L$
    的工资溢价
    $\lambda(\theta_H - \theta_L)$，也必须足以补偿其为达到混同教育水平
    $e^*$ 所付出的成本 $C(e^*, \theta_L)$。这定义了 $e^*$
    的一个上限（对应笔记图中混同均衡部分的 $e_3$）。

由于 $C(e^*, \theta_L) > C(e^*, \theta_H)$ (对于
$e^*>0$)，所以低生产力工人的IC约束通常更为严格 (即 $e_3 < e_4$
如果两者都为正)。因此，混同均衡能够存在的条件主要是由低生产力工人的IC约束决定的：$e^*$
必须满足
$\lambda(\theta_H - \theta_L) \ge C(e^*, \theta_L)$。如果混同的教育成本
$e^*$ 对于低生产力者来说太高，他宁愿选择 $e=0$ 并接受 $\theta_L$
的工资。

一个常见的混同均衡是
$e^*=0$。此时，所有工人都不接受教育，企业支付平均工资
$\lambda\theta_H + (1-\lambda)\theta_L$。这个均衡总是存在的，只要非均衡路径信念设定为：任何
$e>0$ 的教育水平都被认为是 $\theta_L$
类型发出的（这是一种极度悲观但允许的信念，足以阻止任何人偏离 $e^*=0$）。

# 逆向选择 (Adverse Selection)

逆向选择指的是在交易中，一方拥有另一方所不具备的信息，从而可能导致市场出现低效率甚至失灵的情况。这里主要讨论的是劳动市场。

## 基本设定

-   **生产力 (productivity) $\theta$**: 代表工人的生产能力，分布在区间
    $[\underline{\theta}, \bar{\theta}]$，其分布函数为
    $F(\theta)$，密度函数为 $f(\theta)$。

-   **保留工资 (reservation wage) $r(\theta)$**:
    $\theta$类型的工人愿意接受的最低工资。通常假设
    $r'(\theta) > 0$，即生产力越高的工人，其保留工资也越高。

-   **企业提供的工资 $W$**: 企业提供一个统一的工资 $W$，所有满足
    $r(\theta) \le W$ 的工人都会被吸引并前来应聘。

## 图示解释 (根据图片描述)

图片的左上角图示了生产力 $\theta$ (横轴)与工资 $W$
(纵轴)之间的关系。$r(\theta)$ 是一条向上倾斜的曲线/直线。当企业提供工资
$W$ 时，所有保留工资低于或等于 $W$ 的工人（即图中 $r(\theta)$ 曲线上 $W$
水平线以下的对应 $\theta$ 区间，记为
$\{\theta | r(\theta) \le W\}$）会接受这份工作。企业无法直接观察到每个应聘者的真实生产力
$\theta$。

## 竞争性均衡 (Competitive Equilibrium)

在竞争性市场中，企业的期望利润为零。这意味着企业支付的工资 $W$
应该等于它雇佣到的工人的平均生产力。均衡条件为：
$$W = E[\theta | r(\theta) \le W]$$
即企业支付的工资，等于所有接受该工资的工人的期望生产力。

## 例子1 (市场失灵 - Market Breakdown)

假设 $r(\theta) = \frac{2}{3}\theta$，且 $\theta \sim U(0,1)$
(在0到1之间均匀分布)。 那么，工人接受工资 $W$ 的条件是
$\frac{2}{3}\theta \le W \Rightarrow \theta \le \frac{3}{2}W$。
因此，企业雇佣的工人的期望生产力为：
$$E[\theta | r(\theta) \le W] = E\left[\theta \middle| \theta \le \frac{3}{2}W\right]$$
假设 $\frac{3}{2}W \le 1$ (即
$W \le \frac{2}{3}$，这样工人的生产力上限仍在1以内)。由于
$\theta \sim U(0,1)$，那么：
$$E\left[\theta \middle| \theta \le \frac{3}{2}W\right] = \frac{0 + \frac{3}{2}W}{2} = \frac{3}{4}W$$
在均衡时，$W = E[\theta | r(\theta) \le W]$，所以： $$W = \frac{3}{4}W$$
这只有在 $W=0$
时成立。这意味着市场上唯一可能的均衡工资是0，此时没有工人愿意工作，市场崩溃。

## 例子2 (多重均衡)

假设 $r(\theta) = \frac{1}{3}\theta$，且 $\theta \sim U(0,1)$。
工人接受工资 $W$ 的条件是
$\frac{1}{3}\theta \le W \Rightarrow \theta \le 3W$。

-   **情况一：若 $3W \le 1$ (即 $W \le \frac{1}{3}$)**
    $$E[\theta | \theta \le 3W] = \frac{3W}{2}$$ 均衡时
    $W = \frac{3W}{2} \Rightarrow W=0$。

-   **情况二：若 $3W > 1$ (即 $W > \frac{1}{3}$)**
    这意味着所有类型的工人 ($\theta \in [0,1]$) 都会被吸引。此时：
    $$E[\theta | \theta \in [0,1]] = \frac{0+1}{2} = \frac{1}{2}$$
    均衡时 $W = \frac{1}{2}$。这个均衡是成立的，因为 $W=\frac{1}{2}$
    满足 $W > \frac{1}{3}$ 的条件。

因此，这个例子中存在两个均衡：$W=0$ 和 $W=\frac{1}{2}$。

## 图示解释 (根据图片左下角描述 - 多重均衡)

该图的横轴是 $\theta$ (或代表平均生产力的某种指标)，纵轴是 $W$。曲线
$E[\theta | r(\theta) \le W]$ 表示给定工资 $W$
时，企业能吸引到的工人的平均生产力。$45^\circ$ 线表示
$W = E[\theta | r(\theta) \le W]$，即均衡点。图中可能标出多个交点
$E_1, E_2, E_3, E_4$，这些都是潜在的均衡。

### 稳定性 (Stability)

-   如果 $E[\theta | \dots]$ 曲线从上方穿过 $45^\circ$ 线（如
    $E_2, E_4$），则该均衡是局部稳定的。

-   如果 $E[\theta | \dots]$ 曲线从下方穿过 $45^\circ$ 线（如
    $E_3$），则该均衡是不稳定的。

图片注释提到 \"$E_4$ is the only equ for dynamic game where firms first
make wage offers then workers choose the best
offer\"，指出在特定动态博弈中 $E_4$ 可能是最终结果。

# 逆向选择 ($r'(\theta) < 0$) 和 伯特兰竞争

## 逆向选择 ($r'(\theta) < 0$)

这是一个特殊情况，即生产力越高的工人，其保留工资反而越低。图中
$r(\theta)$ 曲线向下倾斜。企业提供工资 $W$ 时，会吸引 $r(\theta) \le W$
的工人，这意味着会吸引生产力 $\theta$ 高于某个阈值的工人。

## 寡头垄断 (Oligopoly)

指市场上只有少数几家公司（寡头）进行竞争。这些公司的决策会相互影响。

## 价格竞争 (Bertrand Competition - 伯特兰竞争)

### 核心思想

企业通过制定价格来进行竞争。

### 基本假设

-   至少有两家企业。

-   产品同质 (homogeneous product)。

-   企业同时选择价格 $p_1, p_2$。

-   消费者从价格较低的企业购买。若价格相同，则市场需求平均分配。

-   边际生产成本 (marginal cost) 为常数 $c$。即 $MC = c$。

### 逻辑

如果一家企业的价格 $p_i > c$，竞争对手可以通过定一个略低于 $p_i$
但仍高于 $c$
的价格来抢占所有市场份额并获得正利润。这种削价竞争会一直持续下去，直到价格被压低到边际成本的水平。

### 均衡结果

$$p_1 = p_2 = \dots = p_N = MC = c$$
在伯特兰均衡中，所有企业都将价格定在边际成本水平，经济利润为零。这个结果与完全竞争市场相同。
图片中图示了水平的边际成本线 $c$，伯特兰均衡价格 $P=c$，而垄断价格 $P^m$
通常高于 $c$。

### 例子与注释

图片中提到两家企业 $mc_1=3, mc_2=3$，则均衡价格 $p_1=p_2=3$。 关于
\"$p1=5, p2=5-\epsilon$ 加价获利 (若 price 连续) No Nash equ. unless
$P_1^m < 5 \Rightarrow P_2 = P_1^m, P_1=5$\"
的注释，是在特定条件下对标准伯特兰模型的讨论或扩展，可能涉及非对称成本或垄断势力。

# 古诺竞争、斯塔克尔伯格模型、线性城市模型

## 数量竞争 (Cournot Competition - 古诺竞争)

### 核心思想

企业通过选择产量来进行竞争。

### 基本假设

-   至少有两家企业 (设为企业1和企业2)。

-   企业同时决定各自的产量 $q_1, q_2$。

-   市场价格 $P$ 由市场总产量 $Q = q_1 + q_2$
    决定。线性需求函数为：$P(Q) = a - bQ = a - b(q_1+q_2)$。

-   边际成本相同且为常数，$mc_1 = mc_2 = c$。

### 企业1的利润最大化问题

企业1的利润函数为：
$$\pi_1(q_1, q_2) = P(q_1+q_2) \cdot q_1 - c q_1 = [a - b(q_1+q_2)]q_1 - c q_1$$

### 一阶条件 (FOC)

企业1选择 $q_1$ 使其利润最大化，对 $q_1$ 求导并令其为0:
$$\frac{\partial \pi_1}{\partial q_1} = a - 2bq_1 - bq_2 - c = 0$$

### 反应函数 (Reaction Function) $R_1(q_2)$

从一阶条件中解出 $q_1$: $$q_1 = R_1(q_2) = \frac{a-c-bq_2}{2b}$$
这是企业1在给定 $q_2$ 时的最优产量。

### 对称性与古诺均衡

由于企业对称，企业2的反应函数为 $q_2 = R_2(q_1) = \frac{a-c-bq_1}{2b}$。
古诺均衡是 $(q_1^*, q_2^*)$ 满足 $q_1^* = R_1(q_2^*)$ 和
$q_2^* = R_2(q_1^*)$。 在对称情况下，$q_1^* = q_2^* = q^*$，解得：
$$q^* = \frac{a-c}{3b}$$ 总产量 $Q^* = 2q^* = \frac{2(a-c)}{3b}$。
均衡价格 $P^* = a - bQ^* = \frac{a+2c}{3}$。

### 图示

图片显示两条向下倾斜的反应函数，其交点即为古诺-纳什均衡
$(q_1^*, q_2^*)$。

## 斯塔克尔伯格模型 (Stackelberg Model)

### 核心思想

数量竞争，但企业决策有先后顺序：领导者 (leader) 和 跟随者 (follower)。

### 基本假设

-   两家企业，边际成本 $mc_1=mc_2=c$。需求函数 $P = a-bQ$。

-   企业1 (领导者) 首先选择其产量 $q_1$。

-   企业2 (跟随者) 观察到 $q_1$ 后，再选择其产量 $q_2$。

### 求解方法：逆向归纳法 (Backward Induction)

1.  **第二阶段 (Stage 2 - 跟随者的决策)**: 企业2在观察到 $q_1$ 后，选择
    $q_2$ 最大化其利润。其反应函数与古诺模型中相同：
    $$q_2(q_1) = R_2(q_1) = \frac{a-c-bq_1}{2b}$$ (图片中显示
    $q_2 = \frac{a-bq_1-C}{2b}$，若 $C$ 代表边际成本，则一致)。

2.  **第一阶段 (Stage 1 - 领导者的决策)**: 企业1预期到企业2的反应，选择
    $q_1$ 以最大化其利润，将 $R_2(q_1)$ 代入 $\pi_1$:
    $$\pi_1(q_1) = \left[a-b\left(q_1 + \frac{a-c-bq_1}{2b}\right)\right]q_1 - c q_1$$
    根据图片中的简化形式（扣除成本后的利润表达式）：
    $\pi_1(q_1) = \left(\frac{a-c}{2} - \frac{b}{2}q_1\right)q_1 = \frac{1}{2}(a-c)q_1 - \frac{b}{2}q_1^2$
    (更完整的推导是
    $\pi_1 = (P(q_1+R_2(q_1)) - c)q_1 = (\frac{a-c-bq_1}{2})q_1$)

    对 $\pi_1$ 关于 $q_1$ 求一阶条件并令其为0:
    $$\frac{d\pi_1}{dq_1} = \frac{1}{2}(a-c) - bq_1 = 0$$
    解得领导者产量： $$q_1^S = \frac{a-c}{2b}$$ 将 $q_1^S$
    代入企业2的反应函数，得到跟随者的产量：
    $$q_2^S = \frac{a-c-b\left(\frac{a-c}{2b}\right)}{2b} = \frac{a-c-\frac{a-c}{2}}{2b} = \frac{a-c}{4b}$$

### 结果比较

-   领导者产量 $q_1^S = \frac{a-c}{2b}$ (高于古诺产量)。

-   跟随者产量 $q_2^S = \frac{a-c}{4b}$ (低于古诺产量)。

-   总产量 $Q^S = q_1^S + q_2^S = \frac{3(a-c)}{4b}$ (高于古诺总产量)。

-   领导者有先发优势，利润更高。

图片中注释古诺均衡产量 $q_1^* = q_2^* = \frac{a-c}{3b}$。

## 线性城市模型 (Linear City Model - Hotelling Model)

### 核心思想

考虑空间差异和运输成本的企业竞争模型。

### 基本设定

-   消费者均匀分布在一条长度为1的线段上 (例如从0到1)。

-   两家企业，企业1位于0点 (Firm 1)，企业2位于1点 (Firm 2)。

-   企业边际成本 $mc_1=mc_2=c$。

-   消费者购买产品需要支付运输成本，每单位距离的运输成本为 $t$。位于 $x$
    处的消费者到企业1的运输成本为 $tx$，到企业2的运输成本为 $t(1-x)$。

-   每个消费者购买一单位产品。$V$ 是产品的价值。

### 消费者的决策

位于 $\hat{x}$ 的消费者在企业1和企业2之间无差异
(indifferent)，如果他从两家企业购买的总成本（价格+运输成本）相同：
$$P_1 + t\hat{x} = P_2 + t(1-\hat{x})$$ 解出市场分界点 $\hat{x}$
(即企业1的需求，假设总消费者数量为1)：
$$P_1 + t\hat{x} = P_2 + t - t\hat{x}$$ $$2t\hat{x} = P_2 - P_1 + t$$
$$\hat{x} = \frac{P_2 - P_1 + t}{2t} = \frac{P_2 - P_1}{2t} + \frac{1}{2}$$
企业1的需求 $D_1 = \hat{x}$。企业2的需求 $D_2 = 1-\hat{x}$。

# 线性城市模型 (续)

## 假设

$V$ 足够高，以至于所有消费者都会购买产品 ($U(x) > 0$ for all
$x \in [0,1]$)。企业同时定价 (simultaneous price setting)，且
$mc_1=mc_2=c$。

## 企业1的利润最大化

$$\pi_1(P_1, P_2) = \hat{x}(P_1 - c) = \left(\frac{P_2 - P_1}{2t} + \frac{1}{2}\right)(P_1 - c)$$
对 $P_1$ 求一阶导数并令其为0 (FOC):
$$\frac{\partial \pi_1}{\partial P_1} = -\frac{1}{2t}(P_1-c) + \left(\frac{P_2 - P_1}{2t} + \frac{1}{2}\right) = 0$$
图片中整理后得到 (将 $\frac{1}{2}$ 写作 $\frac{t}{2t}$ 并合并同类项)：
$$\frac{-P_1+c}{2t} + \frac{P_2-P_1+t}{2t} = 0 \quad (\text{图片中为 } -\frac{1}{2t}(P_1-c) + \frac{P_2-P_1}{2t} + \frac{1}{2}=0)$$
$$-P_1+c + P_2-P_1+t = 0$$ $$2P_1 = P_2 + c + t$$
这是企业1对企业2价格的反应函数 $P_1(P_2)$。

## 企业2的利润最大化

企业2的需求是
$D_2 = 1-\hat{x} = 1 - \left(\frac{P_2 - P_1}{2t} + \frac{1}{2}\right) = \frac{P_1 - P_2 + t}{2t}$。
$$\pi_2(P_1, P_2) = (1-\hat{x})(P_2 - c) = \left(\frac{P_1 - P_2 + t}{2t}\right)(P_2 - c)$$
对 $P_2$ 求一阶导数并令其为0 (FOC):
$$\frac{\partial \pi_2}{\partial P_2} = -\frac{1}{2t}(P_2-c) + \frac{P_1 - P_2 + t}{2t} = 0$$
$$-P_2+c + P_1-P_2+t = 0$$ $$2P_2 = P_1 + c + t$$
这是企业2对企业1价格的反应函数 $P_2(P_1)$。

## 对称均衡 (Symmetric Equilibrium)

由于两家企业是对称的，在一个纳什均衡中它们会定相同的价格，即
$P_1^* = P_2^* = P^*$。 将 $P_1 = P_2 = P$
代入任何一个反应函数，例如企业1的反应函数 $2P_1 = P_2 + c + t$:
$$2P^* = P^* + c + t$$ $$P^* = c + t$$ 所以，均衡时两家企业的价格都是
$P_1^* = P_2^* = c+t$。

在这个模型中，企业会收取高于边际成本的价格。价格加成 (markup)
等于运输成本参数 $t$。运输成本 $t$
越大，产品因地理位置带来的差异化程度越高，企业就拥有更大的定价权。如果
$t \to 0$，则 $P^* \to c$，结果趋向于伯特兰竞争的结果。
